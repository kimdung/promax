<!DOCTYPE html>
<html>
<head>
    <title>Upload logo</title>
</head>
<body>
    <div>
        Upload logo màn hình khởi động:
        <ul>
            <li>Cài đặt firmware bản mới nhất</li>
            <li>Ấn <b>Kết nối</b> để kết nối với ProMax </li>
            <li>Ấn <b>Upload</b> để chọn file ảnh muốn upload </li>
        </ul>
        <p>Chỉ chọn ảnh jpeg 240x240, kích thước nhỏ hơn 100KB!!</p>
    </div>
    <div>
        <button id="connect-button">Kết nối</button>
        <button id="transfer-file-button">Upload</button>
        <div id="status-label"></div>
    </div>  
</body>

<script>
    function _0x3c77(){const _0x5e48da=['Đã\x20kết\x20nối\x20với\x20ProMax','addEventListener','writeValue','connect-button','Connecting\x20to\x20device\x20...','7yAEzqx','innerHTML','byteLength','result','map','0000fff0-0000-1000-8000-00805f9b34fb','status-label','1276533CRwxHk','3007806BGmUKT','Trình\x20duyệt\x20này\x20không\x20hỗ\x20trợ','File\x20block\x20write\x20error\x20with\x20','type','0000fff3-0000-1000-8000-00805f9b34fb','2EvdYdO','170539otLjuB','target','split','charCodeAt','Getting\x20characteristics\x20...','files','catch','getPrimaryService','onchange','5792670cEkTMN','bluetooth','40RJIHwL','writeValueWithoutResponse','from','64yUREiq','log','connect','File\x20block\x20written\x20-\x20','readAsArrayBuffer','gattserverdisconnected','file','min','DTBK','click','Mất\x20kết\x20nối\x20với\x20ProMax','4381927MecJjp','2916732XQYVzb','Đã\x20upload\x20thành\x20công.\x20ProMax\x20sẽ\x20khởi\x20động\x20lại','onload','VIETMAP_HUD','5663838XKtLAY','getElementById','requestDevice'];_0x3c77=function(){return _0x5e48da;};return _0x3c77();}const _0x1ee9f0=_0x3dde;(function(_0x37e60f,_0x1193f0){const _0x3e2e5b=_0x3dde,_0x5ac2f9=_0x37e60f();while(!![]){try{const _0xbd5cae=-parseInt(_0x3e2e5b(0x10a))/0x1*(parseInt(_0x3e2e5b(0x109))/0x2)+parseInt(_0x3e2e5b(0x104))/0x3+parseInt(_0x3e2e5b(0xf0))/0x4+-parseInt(_0x3e2e5b(0x113))/0x5+-parseInt(_0x3e2e5b(0xf4))/0x6*(-parseInt(_0x3e2e5b(0xfc))/0x7)+-parseInt(_0x3e2e5b(0x118))/0x8*(-parseInt(_0x3e2e5b(0x103))/0x9)+-parseInt(_0x3e2e5b(0x115))/0xa*(parseInt(_0x3e2e5b(0xef))/0xb);if(_0xbd5cae===_0x1193f0)break;else _0x5ac2f9['push'](_0x5ac2f9['shift']());}catch(_0x4e1a3b){_0x5ac2f9['push'](_0x5ac2f9['shift']());}}}(_0x3c77,0xd8c91));const deviceName=_0x1ee9f0(0xf3),SERVICE_UUID=_0x1ee9f0(0x101),FILE_BLOCK_UUID=_0x1ee9f0(0x108),connectButton=document['getElementById'](_0x1ee9f0(0xfa)),transferFileButton=document[_0x1ee9f0(0xf5)]('transfer-file-button'),statusElement=document[_0x1ee9f0(0xf5)](_0x1ee9f0(0x102));!(_0x1ee9f0(0x114)in navigator)&&(msg(_0x1ee9f0(0x105)),alert('Error:\x20Trình\x20duyệt\x20này\x20không\x20hỗ\x20trợ.\x20Hãy\x20thử\x20dùng\x20Chrome\x20trên\x20máy\x20tính'));connectButton['addEventListener']('click',function(_0xef9d9c){const _0x464b72=_0x1ee9f0;connect(),transferFileButton[_0x464b72(0xf8)](_0x464b72(0xed),function(_0x487ccd){const _0x13b03d=_0x464b72;msg('Đang\x20upload\x20file\x20...');let _0x1b1347=document['createElement']('input');_0x1b1347[_0x13b03d(0x107)]=_0x13b03d(0xea),_0x1b1347[_0x13b03d(0x112)]=_0x11e39e=>{const _0x37e385=_0x13b03d;let _0x2cf85c=Array[_0x37e385(0x117)](_0x1b1347[_0x37e385(0x10f)]),_0x25c032=_0x2cf85c[0x0],_0x31f7de=new FileReader();_0x31f7de[_0x37e385(0xf2)]=function(_0x5f24b9){const _0x5ed984=_0x37e385;let _0x481e28=_0x5f24b9[_0x5ed984(0x10b)][_0x5ed984(0xff)],_0x4f7e27=new Uint8Array(_0x481e28);transferFile(_0x481e28);},_0x31f7de[_0x37e385(0xe8)](_0x25c032);},_0x1b1347[_0x13b03d(0xed)]();});});function msg(_0x2452a7){const _0x59a8e4=_0x1ee9f0;statusElement[_0x59a8e4(0xfd)]=_0x2452a7;}function _0x3dde(_0x2022a1,_0x4c9745){const _0x3c7711=_0x3c77();return _0x3dde=function(_0x3dde1f,_0x84adb5){_0x3dde1f=_0x3dde1f-0xe7;let _0xe6712f=_0x3c7711[_0x3dde1f];return _0xe6712f;},_0x3dde(_0x2022a1,_0x4c9745);}function onDisconnected(_0x3cd4f1){const _0x1c9f29=_0x1ee9f0;msg(_0x1c9f29(0xee));}async function connect(){const _0x78b7f9=_0x1ee9f0;msg('Requesting\x20device\x20...');const _0x1ec5ad=await navigator[_0x78b7f9(0x114)][_0x78b7f9(0xf6)]({'filters':[{'name':deviceName}],'optionalServices':[SERVICE_UUID]});msg(_0x78b7f9(0xfb)),_0x1ec5ad[_0x78b7f9(0xf8)](_0x78b7f9(0xe9),onDisconnected);const _0x3f0699=await _0x1ec5ad['gatt'][_0x78b7f9(0x11a)]();msg('Getting\x20primary\x20service\x20...');const _0x37a39f=await _0x3f0699[_0x78b7f9(0x111)](SERVICE_UUID);msg(_0x78b7f9(0x10e)),fileBlockCharacteristic=await _0x37a39f['getCharacteristic'](FILE_BLOCK_UUID),msg(_0x78b7f9(0xf7));}async function transferFile(_0x13f207){let _0x383b4d=0x64*0x400;if(_0x13f207['byteLength']>_0x383b4d){msg('File\x20length\x20is\x20too\x20long:\x20'+_0x13f207['byteLength']+'\x20bytes\x20but\x20maximum\x20is\x20'+_0x383b4d);return;}sendFileBlock(_0x13f207,0x0);}const delay=_0x38c669=>{return new Promise(_0x4e511a=>setTimeout(_0x4e511a,_0x38c669));};async function sendFileBlock(_0x5f0fca,_0x10408d){const _0x861576=_0x1ee9f0;await delay(0x64);let _0x43a22a=_0x5f0fca[_0x861576(0xfe)]-_0x10408d;const _0x3638b2=0x80,_0x11d0bb=Math[_0x861576(0xeb)](_0x43a22a,_0x3638b2);var _0x14d4d4=new Uint8Array(_0x5f0fca,_0x10408d,_0x11d0bb);fileBlockCharacteristic[_0x861576(0xf9)](_0x14d4d4)['then'](_0x2b7dbf=>{const _0x1a3cc8=_0x861576;_0x43a22a-=_0x11d0bb;_0x43a22a>0x0&&(msg(_0x1a3cc8(0xe7)+Math['round'](0x64*(_0x10408d/_0x5f0fca[_0x1a3cc8(0xfe)]))+'%'),_0x10408d+=_0x11d0bb,sendFileBlock(_0x5f0fca,_0x10408d));if(_0x43a22a<=0x0){msg(_0x1a3cc8(0xf1));var _0x54443c=_0x1a3cc8(0xec);const _0x5e504d=Uint8Array[_0x1a3cc8(0x117)](_0x54443c[_0x1a3cc8(0x10c)]('')[_0x1a3cc8(0x100)](_0x1d81cd=>_0x1d81cd[_0x1a3cc8(0x10d)]()));fileBlockCharacteristic[_0x1a3cc8(0x116)](_0x5e504d);}})[_0x861576(0x110)](_0x571d1e=>{const _0x1adbba=_0x861576;console[_0x1adbba(0x119)](_0x571d1e),msg(_0x1adbba(0x106)+_0x43a22a+'\x20bytes\x20remaining,\x20see\x20console');});}
</script>
</html>