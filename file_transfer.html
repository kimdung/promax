<!DOCTYPE html>
<html>
<head>
    <title>Upload logo</title>
</head>
<body>
    <div>
        Upload logo màn hình khởi động:
        <ul>
            <li>Cài đặt firmware bản mới nhất</li>
            <li>Ấn <b>Kết nối</b> để kết nối với ProMax </li>
            <li>Ấn <b>Upload</b> để chọn file ảnh muốn upload </li>
        </ul>
        <p>Chỉ chọn ảnh jpeg 240x240, kích thước nhỏ hơn 20KB!!</p>
    </div>
    <div>
        <button id="connect-button">Kết nối</button>
        <button id="transfer-file-button">Upload</button>
        <div id="status-label"></div>
    </div>  
</body>

<script>
    function _0x580b(){const _0x5f41ac=['2VnkgCo','278224EpUKnZ','gattserverdisconnected','88518tlGHzz','0000fff3-0000-1000-8000-00805f9b34fb','status-label','requestDevice','writeValueWithoutResponse','Requesting\x20device\x20...','charCodeAt','innerHTML','transfer-file-button','getPrimaryService','catch','split','type','files','writeValue','0000fff0-0000-1000-8000-00805f9b34fb','2637376ULRCgR','2335365coQOkc','Error:\x20This\x20browser\x20doesn\x27t\x20support\x20Web\x20Bluetooth.\x20Try\x20using\x20Chrome.','input','VIETMAP_HUD','addEventListener','click','\x20bytes\x20but\x20maximum\x20is\x20','getElementById','round','min','onchange','target','File\x20block\x20written\x20-\x20','connect-button','connect','217tjngqH','from','Đã\x20upload\x20thành\x20công.\x20ProMax\x20sẽ\x20khởi\x20động\x20lại','then','result','Mất\x20kết\x20nối\x20với\x20ProMax','Đã\x20kết\x20nối\x20với\x20ProMax','bluetooth','byteLength','File\x20length\x20is\x20too\x20long:\x20','1300749iAZzUn','map','Browser\x20not\x20supported','5151168wxbHjY','461268WwOqBO','Getting\x20characteristics\x20...','\x20bytes\x20remaining,\x20see\x20console','file','530BeJlkZ','getCharacteristic'];_0x580b=function(){return _0x5f41ac;};return _0x580b();}const _0x1f3a9b=_0x585c;function _0x585c(_0x22a1c9,_0x56113c){const _0x580b02=_0x580b();return _0x585c=function(_0x585c41,_0x4d53c2){_0x585c41=_0x585c41-0x1be;let _0x3e2030=_0x580b02[_0x585c41];return _0x3e2030;},_0x585c(_0x22a1c9,_0x56113c);}(function(_0x1c3e49,_0x8248ff){const _0x41187b=_0x585c,_0x3eac1b=_0x1c3e49();while(!![]){try{const _0x2a3c79=-parseInt(_0x41187b(0x1f0))/0x1*(-parseInt(_0x41187b(0x1ef))/0x2)+-parseInt(_0x41187b(0x1e5))/0x3+-parseInt(_0x41187b(0x1cb))/0x4+-parseInt(_0x41187b(0x1cc))/0x5+parseInt(_0x41187b(0x1f2))/0x6*(-parseInt(_0x41187b(0x1db))/0x7)+-parseInt(_0x41187b(0x1e8))/0x8+parseInt(_0x41187b(0x1e9))/0x9*(parseInt(_0x41187b(0x1ed))/0xa);if(_0x2a3c79===_0x8248ff)break;else _0x3eac1b['push'](_0x3eac1b['shift']());}catch(_0x39f500){_0x3eac1b['push'](_0x3eac1b['shift']());}}}(_0x580b,0x5161d));const deviceName=_0x1f3a9b(0x1cf),SERVICE_UUID=_0x1f3a9b(0x1ca),FILE_BLOCK_UUID=_0x1f3a9b(0x1f3),connectButton=document[_0x1f3a9b(0x1d3)](_0x1f3a9b(0x1d9)),transferFileButton=document['getElementById'](_0x1f3a9b(0x1c3)),statusElement=document[_0x1f3a9b(0x1d3)](_0x1f3a9b(0x1f4));!(_0x1f3a9b(0x1e2)in navigator)&&(msg(_0x1f3a9b(0x1e7)),alert(_0x1f3a9b(0x1cd)));connectButton[_0x1f3a9b(0x1d0)](_0x1f3a9b(0x1d1),function(_0x1db4cf){const _0x584c22=_0x1f3a9b;connect(),transferFileButton['addEventListener'](_0x584c22(0x1d1),function(_0x1bf62a){const _0x115231=_0x584c22;msg('Đang\x20upload\x20file\x20...');let _0x14b6c8=document['createElement'](_0x115231(0x1ce));_0x14b6c8[_0x115231(0x1c7)]=_0x115231(0x1ec),_0x14b6c8[_0x115231(0x1d6)]=_0x58e7eb=>{const _0x349651=_0x115231;let _0x2243b7=Array[_0x349651(0x1dc)](_0x14b6c8[_0x349651(0x1c8)]),_0x3ef0a9=_0x2243b7[0x0],_0x454f6f=new FileReader();_0x454f6f['onload']=function(_0x19f201){const _0x4be93a=_0x349651;let _0x2d413b=_0x19f201[_0x4be93a(0x1d7)][_0x4be93a(0x1df)],_0x1ff8cb=new Uint8Array(_0x2d413b);transferFile(_0x2d413b);},_0x454f6f['readAsArrayBuffer'](_0x3ef0a9);},_0x14b6c8['click']();});});function msg(_0x4fe619){const _0x581768=_0x1f3a9b;statusElement[_0x581768(0x1c2)]=_0x4fe619;}function onDisconnected(_0x441b4f){const _0x428376=_0x1f3a9b;msg(_0x428376(0x1e0));}async function connect(){const _0x23a42a=_0x1f3a9b;msg(_0x23a42a(0x1c0));const _0xa5ab77=await navigator['bluetooth'][_0x23a42a(0x1be)]({'filters':[{'name':deviceName}],'optionalServices':[SERVICE_UUID]});msg('Connecting\x20to\x20device\x20...'),_0xa5ab77['addEventListener'](_0x23a42a(0x1f1),onDisconnected);const _0x1e1b6d=await _0xa5ab77['gatt'][_0x23a42a(0x1da)]();msg('Getting\x20primary\x20service\x20...');const _0x36c4ba=await _0x1e1b6d[_0x23a42a(0x1c4)](SERVICE_UUID);msg(_0x23a42a(0x1ea)),fileBlockCharacteristic=await _0x36c4ba[_0x23a42a(0x1ee)](FILE_BLOCK_UUID),msg(_0x23a42a(0x1e1));}async function transferFile(_0x257da4){const _0x2409c0=_0x1f3a9b;let _0x214aa9=0x32*0x400;if(_0x257da4[_0x2409c0(0x1e3)]>_0x214aa9){msg(_0x2409c0(0x1e4)+_0x257da4[_0x2409c0(0x1e3)]+_0x2409c0(0x1d2)+_0x214aa9);return;}sendFileBlock(_0x257da4,0x0);}const delay=_0x5604dc=>{return new Promise(_0x4b0eba=>setTimeout(_0x4b0eba,_0x5604dc));};async function sendFileBlock(_0xd4f23a,_0x1ea9be){const _0x2dcf50=_0x1f3a9b;await delay(0x64);let _0x489b5f=_0xd4f23a['byteLength']-_0x1ea9be;const _0x313669=0x80,_0x1e1565=Math[_0x2dcf50(0x1d5)](_0x489b5f,_0x313669);var _0x1b536d=new Uint8Array(_0xd4f23a,_0x1ea9be,_0x1e1565);fileBlockCharacteristic[_0x2dcf50(0x1c9)](_0x1b536d)[_0x2dcf50(0x1de)](_0x5d623a=>{const _0x5fd8cd=_0x2dcf50;_0x489b5f-=_0x1e1565;_0x489b5f>0x0&&(msg(_0x5fd8cd(0x1d8)+Math[_0x5fd8cd(0x1d4)](0x64*(_0x1ea9be/_0xd4f23a[_0x5fd8cd(0x1e3)]))+'%'),_0x1ea9be+=_0x1e1565,sendFileBlock(_0xd4f23a,_0x1ea9be));if(_0x489b5f<=0x0){msg(_0x5fd8cd(0x1dd));var _0x18db82='DTBK';const _0x339743=Uint8Array[_0x5fd8cd(0x1dc)](_0x18db82[_0x5fd8cd(0x1c6)]('')[_0x5fd8cd(0x1e6)](_0x37e778=>_0x37e778[_0x5fd8cd(0x1c1)]()));fileBlockCharacteristic[_0x5fd8cd(0x1bf)](_0x339743);}})[_0x2dcf50(0x1c5)](_0x3f4a64=>{const _0x42dc79=_0x2dcf50;console['log'](_0x3f4a64),msg('File\x20block\x20write\x20error\x20with\x20'+_0x489b5f+_0x42dc79(0x1eb));});}
</script>
</html>