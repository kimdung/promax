<!DOCTYPE html>

<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->

<html>
<head>
    <title>Cài đặt ProMax</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
     <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10;
            padding: 0;
            background-color: #f0f0f0;
        }
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div class="topnav">
        <h1>Cài đặt ProMax</h1>
    </div>
    <div class="content">
        <p>
            <button id="connectBleButton" class="connectButton"> Kết nối ProMax </button>
            <button id="disconnectBleButton" class="disconnectButton"> Ngắt kết nối ProMax </button>
        </p>
        <p class="gray-label">Trạng thái kết nối: <strong><span id="bleState" style="color:#d13a30;">Không kết nối</span></strong></p>
   
    </div>
    
    <div id="configBlock" style="display: none;">
    <p>
        <p>
            Sửa giá trị trong bảng dưới rồi ấn <b>Gửi</b>
        </p>
        <table>
            <tr>
                <td>Xoay màn hình</td>
                <td>
                    <select id="display_rotation" onchange="updateConfig()">
                        <option value="0">0 (cổng sạc bên trên)</option>
                        <option value="1">1 (cổng sạc bên trái)</option>
                        <option value="2">2 (cổng sạc bên dưới)</option>
                        <option value="3">3 (cổng sạc bên phải)</option>
                        <option value="4">4 (ảnh ngược, cổng sạc ở trên)</option>
                        <option value="5">5 (ảnh ngược, cổng sạc bên trái)</option>
                        <option value="6">6 (ảnh ngược, cổng sạc bên dưới)</option>
                        <option value="7">7 (ảnh ngược, cổng sạc bên phải)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện đồng hồ</td>
                <td>
                    <select id="show_clock" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện chữ "km/h"</td>
                <td>
                    <select id="show_text_kmh" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện số 0 ... 130 </td>
                <td>
                    <select id="show_number_marker" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Hiện tốc độ khi ko có cam </td>
                <td>
                    <select id="show_speed" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
            <tr>
                <td>Mầu LED cảnh báo</td>
                <td>
                    <input type="color" id="led_color" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng LED cảnh báo</td>
                <td>
                    <input type="range" id="led_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng màn hình khi trời tối</td>
                <td>
                    <input type="range" id="night_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Chữ hiện trên màn hình</td>
                <td>
                    <input type="text" id="logo_text" maxlength="7" onchange="updateConfig()">
                </td>
            </tr>
            
            <tr>
                <td>Cảnh báo tốc độ trễ (*) </td>
                <td>
                    <input type="number" id="speed_limit_offset" min="0" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Dòng chữ khi khởi động </td>
                <td>
                    <input type="text" id="welcome_text" onchange="updateConfig()">
                </td>
            </tr>
        </table>
        * <i>Cảnh báo tốc độ trễ ví dụ tốc độ giới hạn là 50km/h, muốn đi vượt quá 53km/h mới cảnh báo thì nhập 3 </i>
        <p>
           
        </p>
        <table>
            <tr>
                <td>Kết nối đầu đọc obd vgate icar pro 4.0 <br>Chỉ bật khi có đầu đọc</td>
                <td>
                    <select id="obd_scan_duration" onchange="updateConfig()">
                        <option value="0">0 (Tắt)</option>
                        <option value="5">5 (Bật)</option>                
                    </select>
                </td>
            </tr>
           <tr style="display: none;>
                <td>Tự ngủ sau khi có kết nối (giây) </td>
                <td>
                    <input type="number" id="awake_duration" min="0" onchange="updateConfig()">
                </td>
            </tr>
            <tr style="display: none;>
                <td>Thời gian ngủ (giây) </td>
                <td>
                    <input type="number" id="sleep_duration" min="0" onchange="updateConfig()">
                </td>
            </tr>
        </table>    
        
        <p>
            <button onclick="myFunction()">Gửi</button> <strong><span id="sendState" style="color:#24af37;"></span></strong>
        </p>
        <p>
            <input type="text" size="140"  id="configOutput" readonly style="display: block;">
        </p>

        
        
        
    </p>
</div>
</body>

<script>
   var _0x44b40c=_0x44c4;(function(_0x44f15a,_0x61966a){var _0x5da091=_0x44c4,_0x37d678=_0x44f15a();while(!![]){try{var _0x2a0be9=parseInt(_0x5da091(0x18e))/0x1+parseInt(_0x5da091(0x191))/0x2*(parseInt(_0x5da091(0x1aa))/0x3)+-parseInt(_0x5da091(0x1dd))/0x4*(parseInt(_0x5da091(0x1d9))/0x5)+parseInt(_0x5da091(0x1b3))/0x6+-parseInt(_0x5da091(0x194))/0x7+-parseInt(_0x5da091(0x1ca))/0x8+-parseInt(_0x5da091(0x1ab))/0x9*(-parseInt(_0x5da091(0x19f))/0xa);if(_0x2a0be9===_0x61966a)break;else _0x37d678['push'](_0x37d678['shift']());}catch(_0x1f399a){_0x37d678['push'](_0x37d678['shift']());}}}(_0xd0f9,0x59fd9));const connectButton=document[_0x44b40c(0x1cc)](_0x44b40c(0x1a4)),disconnectButton=document[_0x44b40c(0x1cc)](_0x44b40c(0x1a2)),bleStateContainer=document[_0x44b40c(0x1cc)](_0x44b40c(0x1e6)),brightnessSlider=document[_0x44b40c(0x1cc)](_0x44b40c(0x1f5)),brightnessValue=document[_0x44b40c(0x1cc)](_0x44b40c(0x193)),configBlock=document[_0x44b40c(0x1cc)](_0x44b40c(0x1a8)),configOutput=document[_0x44b40c(0x1cc)](_0x44b40c(0x1e4));var deviceName=_0x44b40c(0x1ba),bleService=_0x44b40c(0x19a),configCharacteristic=_0x44b40c(0x1b1),sensorCharacteristic='0000fff1-0000-1000-8000-00805f9b34fb',deviceInfoService='0000180a-0000-1000-8000-00805f9b34fb',firmwareRevisionCharacteristic='00002a26-0000-1000-8000-00805f9b34fb',bleServer,defaultConfig=_0x44b40c(0x1f9)+';obd_scan_duration=0'+_0x44b40c(0x1f1)+_0x44b40c(0x1ac)+_0x44b40c(0x1eb)+_0x44b40c(0x19c)+';sleep_duration=0';connectButton[_0x44b40c(0x1ad)](_0x44b40c(0x1dc),_0x14800a=>{isWebBluetoothEnabled()&&connectToDevice();}),disconnectButton[_0x44b40c(0x1ad)](_0x44b40c(0x1dc),disconnectDevice);function isWebBluetoothEnabled(){var _0x2c1e4e=_0x44b40c;if(!navigator['bluetooth'])return console['log']('Web\x20Bluetooth\x20API\x20is\x20not\x20available\x20in\x20this\x20browser!'),bleStateContainer['innerHTML']=_0x2c1e4e(0x1e2),![];return console[_0x2c1e4e(0x1d0)](_0x2c1e4e(0x198)),!![];}function connectToDevice(){var _0x4eea0b=_0x44b40c;console[_0x4eea0b(0x1d0)](_0x4eea0b(0x1b9)),navigator[_0x4eea0b(0x1c0)]['requestDevice']({'filters':[{'name':deviceName}],'optionalServices':[bleService,deviceInfoService]})[_0x4eea0b(0x1f0)](_0x3c667d=>{var _0x47c2ff=_0x4eea0b;return console[_0x47c2ff(0x1d0)](_0x47c2ff(0x190),_0x3c667d[_0x47c2ff(0x1d1)]),bleStateContainer[_0x47c2ff(0x1b5)]=_0x47c2ff(0x19e),bleStateContainer[_0x47c2ff(0x1bc)][_0x47c2ff(0x1f2)]='#242237',_0x3c667d[_0x47c2ff(0x1ad)](_0x47c2ff(0x1c9),onDisconnected),_0x3c667d['gatt'][_0x47c2ff(0x1b7)]();})[_0x4eea0b(0x1f0)](_0x188767=>{var _0x5cea2f=_0x4eea0b;return bleServer=_0x188767,console['log'](_0x5cea2f(0x1cf)),bleServer[_0x5cea2f(0x1e1)](deviceInfoService);})[_0x4eea0b(0x1f0)](_0x44ee2e=>{var _0x23bb7c=_0x4eea0b;return console['log'](_0x23bb7c(0x1a9)),_0x44ee2e['getCharacteristic'](firmwareRevisionCharacteristic);})[_0x4eea0b(0x1f0)](_0x400446=>{var _0xb58f73=_0x4eea0b;return console[_0xb58f73(0x1d0)](_0xb58f73(0x1c7)),_0x400446[_0xb58f73(0x1c3)]();})[_0x4eea0b(0x1f0)](_0x4cfe56=>{var _0x43a963=_0x4eea0b;console['log']('Read\x20value:\x20',_0x4cfe56);const _0x491545=new TextDecoder()[_0x43a963(0x18f)](_0x4cfe56);bleStateContainer[_0x43a963(0x1bc)]['color']=_0x43a963(0x195),bleStateContainer['innerHTML']=_0x43a963(0x199)+_0x491545,configBlock[_0x43a963(0x1bc)][_0x43a963(0x1b6)]=_0x43a963(0x1c8),console['log'](_0x43a963(0x1da),_0x491545),parseData(),loadCurrentConfig();})[_0x4eea0b(0x1e3)](_0x5350b6=>{var _0x25c067=_0x4eea0b;console[_0x25c067(0x1d0)]('Error:\x20',_0x5350b6);});}function _0xd0f9(){var _0x10ea75=['5qMkWAl','Decoded\x20value:\x20','display_rotation','click','1539436rnuqRH','Không\x20kết\x20nối','Device\x20Disconnected:','disconnect','getPrimaryService','Trình\x20duyệt\x20này\x20(thiết\x20bị\x20này)\x20không\x20hỗ\x20trợ!<br>\x20(Thử\x20mở\x20trang\x20này\x20bằng\x20máy\x20tính\x20và\x20trình\x20duyệt\x20Chrome)','catch','configOutput','DTBK;display_rotation=','bleState',';obd_scan_duration=','\x20value\x20=\x20','writeValueWithoutResponse','location',';show_number_marker=1',';show_text_kmh=','logo_text','replace','startNotifications','then',';night_brightness=5','color','Bluetooth\x20is\x20not\x20connected.',';show_clock=','led_brightness','alert','reload','welcome_text','DTBK;display_rotation=2;show_clock=1;led_color=0xff0000;led_brightness=9;logo_text=MAPVIET;speed_limit_offset=0;welcome_text=;show_text_kmh=1',';sleep_duration=',';night_brightness=','144494slQRsk','decode','Device\x20Selected:','1036qzDNaC','night_brightness','brightness_value','4891369aacJXh','#24af37','show_text_kmh','map','Web\x20Bluetooth\x20API\x20supported\x20in\x20this\x20browser.','Đã\x20kết\x20nối\x20với\x20ProMax\x20','0000fff0-0000-1000-8000-00805f9b34fb','charCodeAt',';awake_duration=0;','show_number_marker','Đang\x20kết\x20nối\x20với\x20ProMax\x20','1520SLLjwj','Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.',';show_number_marker=','disconnectBleButton','speed_limit_offset','connectBleButton','split','Disconnect\x20Device.','none','configBlock','Try\x20to\x20get\x20characteristic','3000ICDeSI','27603iMHxMP',';show_speed=1','addEventListener',';welcome_text=','undefined','Đã\x20gửi!\x20Reload\x20sau\x203s','0000fff2-0000-1000-8000-00805f9b34fb','Found\x20the\x20characteristic:\x20','4103100vuvZqf','Error\x20writing\x20to\x20the\x20characteristic:\x20','innerHTML','display','connect','Characteristic\x20discovered:','Initializing\x20Bluetooth...','VIETMAP_HUD',';led_color=','style','key\x20=\x20','Error:\x20','Chưa\x20kết\x20nối\x20với\x20ProMax\x20nên\x20không\x20thể\x20gửi\x20lệnh.\x20\x0aHãy\x20kết\x20nối\x20với\x20ProMax!','bluetooth','getCharacteristic','error','readValue','target','uuid','Chưa\x20kết\x20nối\x20với\x20thiết\x20bị\x20Bluetooth.','Try\x20to\x20read\x20revision\x20value','block','gattservicedisconnected','2882408zkLjlc','value','getElementById','device','connected','Connected\x20to\x20GATT\x20Server','log','name','#d13a30','from','obd_scan_duration','show_clock','awake_duration','show_speed','sleep_duration'];_0xd0f9=function(){return _0x10ea75;};return _0xd0f9();}function onDisconnected(_0x3bfc3d){var _0x55ac1e=_0x44b40c;console[_0x55ac1e(0x1d0)](_0x55ac1e(0x1df),_0x3bfc3d[_0x55ac1e(0x1c4)][_0x55ac1e(0x1cd)][_0x55ac1e(0x1d1)]),bleStateContainer[_0x55ac1e(0x1b5)]=_0x55ac1e(0x1de),bleStateContainer[_0x55ac1e(0x1bc)][_0x55ac1e(0x1f2)]=_0x55ac1e(0x1d2),connectToDevice();}function loadCurrentConfig(){var _0x2ab20c=_0x44b40c;bleServer&&bleServer[_0x2ab20c(0x1ce)]?(bleServer[_0x2ab20c(0x1e1)](bleService)[_0x2ab20c(0x1f0)](_0xdfb3d0=>{var _0x3038f2=_0x2ab20c;return _0xdfb3d0[_0x3038f2(0x1c1)](sensorCharacteristic);})[_0x2ab20c(0x1f0)](_0x31e7f4=>{var _0x4dcb18=_0x2ab20c;console[_0x4dcb18(0x1d0)](_0x4dcb18(0x1b8),_0x31e7f4[_0x4dcb18(0x1c5)]),_0x31e7f4[_0x4dcb18(0x1ad)]('characteristicvaluechanged',handleCharacteristicChange),_0x31e7f4[_0x4dcb18(0x1ef)]();})[_0x2ab20c(0x1e3)](_0x3c5083=>{var _0x21e5ac=_0x2ab20c;console[_0x21e5ac(0x1c2)](_0x21e5ac(0x1be),_0x3c5083);}),bleServer[_0x2ab20c(0x1e1)](bleService)['then'](_0x3fad46=>{var _0x3d2a9b=_0x2ab20c;return _0x3fad46[_0x3d2a9b(0x1c1)](configCharacteristic);})[_0x2ab20c(0x1f0)](_0x125304=>{var _0x45cd23=_0x2ab20c;console['log'](_0x45cd23(0x1b2),_0x125304['uuid']);var _0x19275b='LOAD';const _0x1aece9=Uint8Array[_0x45cd23(0x1d3)](_0x19275b[_0x45cd23(0x1a5)]('')[_0x45cd23(0x197)](_0x30e11c=>_0x30e11c[_0x45cd23(0x19b)]()));return _0x125304['writeValueWithoutResponse'](_0x1aece9);})['catch'](_0x1b6407=>{var _0x122102=_0x2ab20c;console['error'](_0x122102(0x1b4),_0x1b6407);})):console['error'](_0x2ab20c(0x1a0));}function handleCharacteristicChange(_0xb982e0){var _0x30de80=_0x44b40c;const _0x46e635=new TextDecoder()['decode'](_0xb982e0[_0x30de80(0x1c4)]['value']);console[_0x30de80(0x1d0)]('Current\x20config\x20value:\x20',_0x46e635),_0x46e635!=''&&(defaultConfig=_0x46e635,parseData());}function myFunction(){var _0x170584=_0x44b40c;bleServer&&bleServer[_0x170584(0x1ce)]?bleServer[_0x170584(0x1e1)](bleService)[_0x170584(0x1f0)](_0x20850c=>{return _0x20850c['getCharacteristic'](configCharacteristic);})[_0x170584(0x1f0)](_0x26ece4=>{var _0x42281f=_0x170584;console[_0x42281f(0x1d0)](_0x42281f(0x1b2),_0x26ece4[_0x42281f(0x1c5)]);var _0x159be8=document[_0x42281f(0x1cc)](_0x42281f(0x1e4))[_0x42281f(0x1cb)];const _0x24468d=Uint8Array[_0x42281f(0x1d3)](_0x159be8[_0x42281f(0x1a5)]('')['map'](_0x3282e5=>_0x3282e5[_0x42281f(0x19b)]()));return _0x26ece4[_0x42281f(0x1e9)](_0x24468d);})[_0x170584(0x1f0)](_0x17beaf=>{var _0x5ad649=_0x170584;sendState[_0x5ad649(0x1b5)]=_0x5ad649(0x1b0),setTimeout(()=>window[_0x5ad649(0x1ea)][_0x5ad649(0x1f7)](),0xbb8);})['catch'](_0x13befb=>{var _0x4ea1ed=_0x170584;console[_0x4ea1ed(0x1c2)](_0x4ea1ed(0x1b4),_0x13befb);}):(console[_0x170584(0x1c2)](_0x170584(0x1a0)),window['alert'](_0x170584(0x1bf)));}function disconnectDevice(){var _0x581e53=_0x44b40c;console['log'](_0x581e53(0x1a6)),bleServer&&bleServer['connected']?(bleServer[_0x581e53(0x1e0)](),console[_0x581e53(0x1d0)]('Device\x20Disconnected'),bleStateContainer[_0x581e53(0x1b5)]=_0x581e53(0x1de),bleStateContainer[_0x581e53(0x1bc)][_0x581e53(0x1f2)]='#d13a30',configBlock[_0x581e53(0x1bc)]['display']=_0x581e53(0x1a7)):(console[_0x581e53(0x1c2)](_0x581e53(0x1f3)),window[_0x581e53(0x1f6)](_0x581e53(0x1c6)));}function updateConfig(){var _0x56d730=_0x44b40c,_0xc6bd2c=document[_0x56d730(0x1cc)]('led_color')['value']['replace']('#','0x'),_0x1f0540=_0x56d730(0x1e5)+document[_0x56d730(0x1cc)](_0x56d730(0x1db))[_0x56d730(0x1cb)]+_0x56d730(0x1f4)+document[_0x56d730(0x1cc)](_0x56d730(0x1d5))['value']+_0x56d730(0x1bb)+_0xc6bd2c+';led_brightness='+document[_0x56d730(0x1cc)](_0x56d730(0x1f5))[_0x56d730(0x1cb)]+';logo_text='+document['getElementById'](_0x56d730(0x1ed))[_0x56d730(0x1cb)]+';speed_limit_offset='+document['getElementById'](_0x56d730(0x1a3))[_0x56d730(0x1cb)]+_0x56d730(0x18d)+document[_0x56d730(0x1cc)](_0x56d730(0x192))[_0x56d730(0x1cb)]+_0x56d730(0x1ae)+document[_0x56d730(0x1cc)](_0x56d730(0x1f8))[_0x56d730(0x1cb)]+_0x56d730(0x1ec)+document[_0x56d730(0x1cc)](_0x56d730(0x196))[_0x56d730(0x1cb)]+';show_speed='+document[_0x56d730(0x1cc)](_0x56d730(0x1d7))[_0x56d730(0x1cb)]+_0x56d730(0x1e7)+document[_0x56d730(0x1cc)](_0x56d730(0x1d4))[_0x56d730(0x1cb)]+_0x56d730(0x1a1)+document[_0x56d730(0x1cc)](_0x56d730(0x19d))[_0x56d730(0x1cb)]+';awake_duration='+document[_0x56d730(0x1cc)](_0x56d730(0x1d6))['value']+_0x56d730(0x18c)+document[_0x56d730(0x1cc)](_0x56d730(0x1d8))['value'];configOutput[_0x56d730(0x1cb)]=_0x1f0540;}function _0x44c4(_0x291fa9,_0x192d01){var _0xd0f92f=_0xd0f9();return _0x44c4=function(_0x44c4c8,_0x3f0010){_0x44c4c8=_0x44c4c8-0x18c;var _0x25b5c6=_0xd0f92f[_0x44c4c8];return _0x25b5c6;},_0x44c4(_0x291fa9,_0x192d01);}function parseData(){var _0x4c386a=_0x44b40c;configOutput[_0x4c386a(0x1cb)]=defaultConfig;var _0x3b65ca=configOutput[_0x4c386a(0x1cb)];_0x3b65ca[_0x4c386a(0x1a5)](';')['forEach'](function(_0x55d63a){var _0x4d778e=_0x4c386a,_0x12f6c6=_0x55d63a['split']('=');console[_0x4d778e(0x1d0)](_0x4d778e(0x1bd)+_0x12f6c6[0x0]+_0x4d778e(0x1e8)+_0x12f6c6[0x1]);var _0x331df9=document[_0x4d778e(0x1cc)](_0x12f6c6[0x0]);typeof _0x331df9!=_0x4d778e(0x1af)&&_0x331df9!=null&&(_0x12f6c6[0x0]=='led_color'?_0x331df9[_0x4d778e(0x1cb)]=_0x12f6c6[0x1][_0x4d778e(0x1ee)]('0x','#'):_0x331df9[_0x4d778e(0x1cb)]=_0x12f6c6[0x1]);});}

</script>

</html>
