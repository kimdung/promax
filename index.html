<!DOCTYPE html>

<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->

<html>
<head>
    <title>Cài đặt ProMax</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
     <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10;
            padding: 0;
            background-color: #f0f0f0;
        }
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div class="topnav">
        <h1>Cài đặt ProMax</h1>
    </div>
    <div class="content">
        <p>
            <button id="connectBleButton" class="connectButton"> Kết nối ProMax </button>
            <button id="disconnectBleButton" class="disconnectButton"> Ngắt kết nối ProMax </button>
        </p>
        <p class="gray-label">Trạng thái kết nối: <strong><span id="bleState" style="color:#d13a30;">Không kết nối</span></strong></p>
   
    </div>
    
    <div id="configBlock" style="display: none;">
    <p>
        <p>
            Sửa giá trị trong bảng dưới rồi ấn <b>Gửi</b>
        </p>
        <table>
            <tr>
                <td>Xoay màn hình</td>
                <td>
                    <select id="display_rotation" onchange="updateConfig()">
                        <option value="0">0 (cổng sạc bên trên)</option>
                        <option value="1">1 (cổng sạc bên trái)</option>
                        <option value="2">2 (cổng sạc bên dưới)</option>
                        <option value="3">3 (cổng sạc bên phải)</option>
                        <option value="4">4 (ảnh ngược, cổng sạc ở trên)</option>
                        <option value="5">5 (ảnh ngược, cổng sạc bên trái)</option>
                        <option value="6">6 (ảnh ngược, cổng sạc bên dưới)</option>
                        <option value="7">7 (ảnh ngược, cổng sạc bên phải)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện đồng hồ</td>
                <td>
                    <select id="show_clock" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện chữ "km/h"</td>
                <td>
                    <select id="show_text_kmh" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện số 0 ... 130 </td>
                <td>
                    <select id="show_number_marker" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Hiện tốc độ khi ko có cam </td>
                <td>
                    <select id="show_speed" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
            <tr>
                <td>Mầu LED cảnh báo</td>
                <td>
                    <input type="color" id="led_color" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng LED cảnh báo</td>
                <td>
                    <input type="range" id="led_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng màn hình khi trời tối</td>
                <td>
                    <input type="range" id="night_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Chữ hiện trên màn hình</td>
                <td>
                    <input type="text" id="logo_text" maxlength="7" onchange="updateConfig()">
                </td>
            </tr>
            
            <tr>
                <td>Cảnh báo tốc độ trễ (*) </td>
                <td>
                    <input type="number" id="speed_limit_offset" min="0" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Dòng chữ khi khởi động </td>
                <td>
                    <input type="text" id="welcome_text" onchange="updateConfig()">
                </td>
            </tr>
        </table>
        * <i>Cảnh báo tốc độ trễ ví dụ tốc độ giới hạn là 50km/h, muốn đi vượt quá 53km/h mới cảnh báo thì nhập 3 </i>
        <p>
           
        </p>
        <table>
            <tr>
                <td>Kết nối đầu đọc obd vgate icar pro 4.0 <br>Chỉ bật khi có đầu đọc</td>
                <td>
                    <select id="obd_scan_duration" onchange="updateConfig()">
                        <option value="0">0 (Tắt)</option>
                        <option value="5">5 (Bật scan 5s)</option>                
                        <option value="10">10 (Bật scan 10s)</option>                
                    </select>
                </td>
            </tr>
          <!--  <tr style="display: none;>
                <td>Tự ngủ sau khi có kết nối (giây) </td>
                <td>
                    <input type="number" id="awake_duration" min="0" onchange="updateConfig()">
                </td>
            </tr>
            <tr style="display: none;>
                <td>Thời gian ngủ (giây) </td>
                <td>
                    <input type="number" id="sleep_duration" min="0" onchange="updateConfig()">
                </td>
            </tr> -->
        </table>    
        
        <p>
            <button onclick="myFunction()">Gửi</button> <strong><span id="sendState" style="color:#24af37;"></span></strong>
        </p>
        <p>
            <input type="text" size="140"  id="configOutput" readonly style="display: none;">
        </p>

        
        
        
    </p>
</div>
</body>

<script>
var _0x484baf=_0x35c1;(function(_0x15b9ba,_0x277d39){var _0x193623=_0x35c1,_0x239f23=_0x15b9ba();while(!![]){try{var _0x11d78b=parseInt(_0x193623(0x1eb))/0x1*(-parseInt(_0x193623(0x1f2))/0x2)+parseInt(_0x193623(0x1f6))/0x3+-parseInt(_0x193623(0x1cb))/0x4+parseInt(_0x193623(0x1d2))/0x5+parseInt(_0x193623(0x1ee))/0x6*(-parseInt(_0x193623(0x215))/0x7)+-parseInt(_0x193623(0x20c))/0x8*(parseInt(_0x193623(0x1d1))/0x9)+parseInt(_0x193623(0x1ec))/0xa*(parseInt(_0x193623(0x1e0))/0xb);if(_0x11d78b===_0x277d39)break;else _0x239f23['push'](_0x239f23['shift']());}catch(_0x3241d6){_0x239f23['push'](_0x239f23['shift']());}}}(_0x50b9,0xe26b4));const connectButton=document['getElementById'](_0x484baf(0x209)),disconnectButton=document['getElementById'](_0x484baf(0x219)),bleStateContainer=document['getElementById']('bleState'),brightnessSlider=document['getElementById'](_0x484baf(0x1d4)),brightnessValue=document[_0x484baf(0x217)](_0x484baf(0x208)),configBlock=document[_0x484baf(0x217)](_0x484baf(0x1dc)),configOutput=document['getElementById'](_0x484baf(0x1fe));var deviceName=_0x484baf(0x1db),bleService='0000fff0-0000-1000-8000-00805f9b34fb',configCharacteristic=_0x484baf(0x1d8),sensorCharacteristic=_0x484baf(0x1f1),deviceInfoService=_0x484baf(0x1bf),firmwareRevisionCharacteristic=_0x484baf(0x1fb),bleServer,defaultConfig=_0x484baf(0x1e2)+';obd_scan_duration=0'+_0x484baf(0x1e5)+_0x484baf(0x1ce)+_0x484baf(0x216);function _0x35c1(_0x5ca151,_0x1faf05){var _0x50b984=_0x50b9();return _0x35c1=function(_0x35c1e5,_0x485325){_0x35c1e5=_0x35c1e5-0x1bd;var _0x54a73a=_0x50b984[_0x35c1e5];return _0x54a73a;},_0x35c1(_0x5ca151,_0x1faf05);}connectButton[_0x484baf(0x1f5)](_0x484baf(0x220),_0x45ade6=>{isWebBluetoothEnabled()&&connectToDevice();}),disconnectButton[_0x484baf(0x1f5)](_0x484baf(0x220),disconnectDevice);function isWebBluetoothEnabled(){var _0x301f0a=_0x484baf;if(!navigator[_0x301f0a(0x212)])return console[_0x301f0a(0x1e3)](_0x301f0a(0x218)),bleStateContainer['innerHTML']=_0x301f0a(0x1cc)+_0x301f0a(0x1e9)+_0x301f0a(0x204)+_0x301f0a(0x200),![];return console['log'](_0x301f0a(0x20d)),!![];}function connectToDevice(){var _0x119ffd=_0x484baf;console[_0x119ffd(0x1e3)]('Initializing\x20Bluetooth...'),navigator['bluetooth'][_0x119ffd(0x1d7)]({'filters':[{'name':deviceName}],'optionalServices':[bleService,deviceInfoService]})[_0x119ffd(0x1cd)](_0x46ea94=>{var _0x1809a3=_0x119ffd;return console[_0x1809a3(0x1e3)]('Device\x20Selected:',_0x46ea94[_0x1809a3(0x203)]),bleStateContainer['innerHTML']='Đang\x20kết\x20nối\x20với\x20ProMax\x20',bleStateContainer[_0x1809a3(0x1e8)][_0x1809a3(0x207)]=_0x1809a3(0x1ea),_0x46ea94[_0x1809a3(0x1f5)](_0x1809a3(0x1c1),onDisconnected),_0x46ea94['gatt'][_0x1809a3(0x1e4)]();})[_0x119ffd(0x1cd)](_0x559895=>{var _0x4eb391=_0x119ffd;return bleServer=_0x559895,console['log'](_0x4eb391(0x1e1)),bleServer[_0x4eb391(0x21b)](deviceInfoService);})['then'](_0x166521=>{var _0x15c112=_0x119ffd;return console['log'](_0x15c112(0x201)),_0x166521[_0x15c112(0x1bd)](firmwareRevisionCharacteristic);})[_0x119ffd(0x1cd)](_0x531659=>{var _0x4ce262=_0x119ffd;return console[_0x4ce262(0x1e3)](_0x4ce262(0x1e7)),_0x531659[_0x4ce262(0x1c9)]();})[_0x119ffd(0x1cd)](_0x115502=>{var _0x5f313f=_0x119ffd;console['log'](_0x5f313f(0x1c4),_0x115502);const _0x164391=new TextDecoder()[_0x5f313f(0x21d)](_0x115502);bleStateContainer[_0x5f313f(0x1e8)][_0x5f313f(0x207)]=_0x5f313f(0x1dd),bleStateContainer[_0x5f313f(0x1be)]=_0x5f313f(0x21e)+_0x164391,configBlock['style']['display']='block',console[_0x5f313f(0x1e3)](_0x5f313f(0x1d6),_0x164391),parseData(),loadCurrentConfig();})['catch'](_0x35a19f=>{console['log']('Error:\x20',_0x35a19f);});}function onDisconnected(_0x1c9b8c){var _0x2fa439=_0x484baf;console['log'](_0x2fa439(0x1f4),_0x1c9b8c['target'][_0x2fa439(0x1c3)][_0x2fa439(0x203)]),bleStateContainer[_0x2fa439(0x1be)]=_0x2fa439(0x20e),bleStateContainer[_0x2fa439(0x1e8)][_0x2fa439(0x207)]=_0x2fa439(0x1f9),connectToDevice();}function loadCurrentConfig(){var _0x45fc6d=_0x484baf;bleServer&&bleServer[_0x45fc6d(0x1f7)]?(bleServer[_0x45fc6d(0x21b)](bleService)[_0x45fc6d(0x1cd)](_0x5e7737=>{var _0x5e55ea=_0x45fc6d;return _0x5e7737[_0x5e55ea(0x1bd)](sensorCharacteristic);})['then'](_0x780f5a=>{var _0x670300=_0x45fc6d;console[_0x670300(0x1e3)]('Characteristic\x20discovered:',_0x780f5a[_0x670300(0x202)]),_0x780f5a['addEventListener'](_0x670300(0x1fa),handleCharacteristicChange),_0x780f5a[_0x670300(0x21a)]();})[_0x45fc6d(0x205)](_0x2cd432=>{var _0x5b643e=_0x45fc6d;console['error'](_0x5b643e(0x20b),_0x2cd432);}),bleServer[_0x45fc6d(0x21b)](bleService)[_0x45fc6d(0x1cd)](_0x10101b=>{var _0x335f0f=_0x45fc6d;return _0x10101b[_0x335f0f(0x1bd)](configCharacteristic);})[_0x45fc6d(0x1cd)](_0x22ec11=>{var _0x1abd66=_0x45fc6d;console['log'](_0x1abd66(0x1d5),_0x22ec11[_0x1abd66(0x202)]);var _0xfcd73f='LOAD';const _0x49fa3f=Uint8Array['from'](_0xfcd73f['split']('')[_0x1abd66(0x1e6)](_0x32af0=>_0x32af0['charCodeAt']()));return _0x22ec11['writeValueWithoutResponse'](_0x49fa3f);})[_0x45fc6d(0x205)](_0x2ae55b=>{var _0x1b9b63=_0x45fc6d;console[_0x1b9b63(0x1fc)]('Error\x20writing\x20to\x20the\x20characteristic:\x20',_0x2ae55b);})):console[_0x45fc6d(0x1fc)](_0x45fc6d(0x222));}function handleCharacteristicChange(_0x497229){var _0x47214e=_0x484baf;const _0x1fa3f2=new TextDecoder()[_0x47214e(0x21d)](_0x497229['target'][_0x47214e(0x1c6)]);console[_0x47214e(0x1e3)](_0x47214e(0x213),_0x1fa3f2),_0x1fa3f2!=''&&(defaultConfig=_0x1fa3f2,parseData());}function myFunction(){var _0x1df8f4=_0x484baf;bleServer&&bleServer[_0x1df8f4(0x1f7)]?bleServer['getPrimaryService'](bleService)[_0x1df8f4(0x1cd)](_0x5cebb0=>{var _0x360fc0=_0x1df8f4;return _0x5cebb0[_0x360fc0(0x1bd)](configCharacteristic);})[_0x1df8f4(0x1cd)](_0x14a191=>{var _0x5a4ca2=_0x1df8f4;console['log'](_0x5a4ca2(0x1d5),_0x14a191[_0x5a4ca2(0x202)]);var _0x3fe9a0=document[_0x5a4ca2(0x217)](_0x5a4ca2(0x1fe))['value'];const _0xf2b2c7=Uint8Array[_0x5a4ca2(0x1df)](_0x3fe9a0[_0x5a4ca2(0x1ff)]('')[_0x5a4ca2(0x1e6)](_0x432fd7=>_0x432fd7['charCodeAt']()));return _0x14a191['writeValueWithoutResponse'](_0xf2b2c7);})['then'](_0x99a697=>{var _0x51fe16=_0x1df8f4;sendState['innerHTML']='Đã\x20gửi!\x20Reload\x20sau\x203s',setTimeout(()=>window[_0x51fe16(0x206)][_0x51fe16(0x1d0)](),0xbb8);})[_0x1df8f4(0x205)](_0x593c72=>{var _0x4f1d0c=_0x1df8f4;console[_0x4f1d0c(0x1fc)](_0x4f1d0c(0x21f),_0x593c72);}):(console[_0x1df8f4(0x1fc)]('Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.'),window[_0x1df8f4(0x1fd)](_0x1df8f4(0x223)));}function disconnectDevice(){var _0x4f42db=_0x484baf;console[_0x4f42db(0x1e3)]('Disconnect\x20Device.'),bleServer&&bleServer[_0x4f42db(0x1f7)]?(bleServer[_0x4f42db(0x1f3)](),console[_0x4f42db(0x1e3)]('Device\x20Disconnected'),bleStateContainer[_0x4f42db(0x1be)]=_0x4f42db(0x20e),bleStateContainer[_0x4f42db(0x1e8)][_0x4f42db(0x207)]=_0x4f42db(0x1f9),configBlock[_0x4f42db(0x1e8)][_0x4f42db(0x1da)]=_0x4f42db(0x20a)):(console[_0x4f42db(0x1fc)]('Bluetooth\x20is\x20not\x20connected.'),window[_0x4f42db(0x1fd)]('Chưa\x20kết\x20nối\x20với\x20thiết\x20bị\x20Bluetooth.'));}function updateConfig(){var _0x39d410=_0x484baf,_0x4dacf8=document[_0x39d410(0x217)](_0x39d410(0x221))[_0x39d410(0x1c6)][_0x39d410(0x1c7)]('#','0x'),_0x34281b=_0x39d410(0x1c0)+document[_0x39d410(0x217)](_0x39d410(0x1c5))['value']+_0x39d410(0x1d9)+document[_0x39d410(0x217)](_0x39d410(0x1de))[_0x39d410(0x1c6)]+_0x39d410(0x20f)+_0x4dacf8+_0x39d410(0x21c)+document[_0x39d410(0x217)](_0x39d410(0x1d4))[_0x39d410(0x1c6)]+';logo_text='+document['getElementById'](_0x39d410(0x211))['value']+_0x39d410(0x1f0)+document[_0x39d410(0x217)]('speed_limit_offset')['value']+';night_brightness='+document['getElementById'](_0x39d410(0x1c8))[_0x39d410(0x1c6)]+_0x39d410(0x210)+document[_0x39d410(0x217)]('welcome_text')[_0x39d410(0x1c6)]+_0x39d410(0x1ed)+document[_0x39d410(0x217)](_0x39d410(0x1d3))[_0x39d410(0x1c6)]+_0x39d410(0x1ef)+document[_0x39d410(0x217)](_0x39d410(0x1ca))[_0x39d410(0x1c6)]+_0x39d410(0x1f8)+document[_0x39d410(0x217)]('obd_scan_duration')['value']+';show_number_marker='+document['getElementById']('show_number_marker')[_0x39d410(0x1c6)];configOutput['value']=_0x34281b;}function _0x50b9(){var _0x8f32b1=['undefined','device','Read\x20value:\x20','display_rotation','value','replace','night_brightness','readValue','show_speed','6640892gaMgeq','Trình\x20duyệt\x20này\x20(thiết\x20bị\x20này)\x20không\x20hỗ\x20trợ!<br>\x20','then',';show_speed=1','forEach','reload','1161bYdTlA','3522505WzVdrq','show_text_kmh','led_brightness','Found\x20the\x20characteristic:\x20','Decoded\x20value:\x20','requestDevice','0000fff2-0000-1000-8000-00805f9b34fb',';show_clock=','display','VIETMAP_HUD','configBlock','#24af37','show_clock','from','22nSXDmj','Connected\x20to\x20GATT\x20Server','DTBK;display_rotation=2;show_clock=1;led_color=0xff0000;led_brightness=9;logo_text=MAPVIET;speed_limit_offset=0;welcome_text=;show_text_kmh=1','log','connect',';night_brightness=5','map','Try\x20to\x20read\x20revision\x20value','style','Thử\x20mở\x20trang\x20này\x20bằng\x20máy\x20tính\x20và\x20trình\x20duyệt\x20Chrome).<br>','#242237','4IYlWlB','12557120NqaUAV',';show_text_kmh=','987294aRKzKh',';show_speed=',';speed_limit_offset=','0000fff1-0000-1000-8000-00805f9b34fb','267538QpTKHB','disconnect','Device\x20Disconnected:','addEventListener','2258640IdoYMy','connected',';obd_scan_duration=','#d13a30','characteristicvaluechanged','00002a26-0000-1000-8000-00805f9b34fb','error','alert','configOutput','split','Hoặc\x20bằng\x20ứng\x20dụng\x20<a\x20href=\x22https://apps.apple.com/us/app/bluefy-web-ble-browser/id1492822055\x22>Bluefy</a>\x20trên\x20iPhone.','Try\x20to\x20get\x20characteristic','uuid','name','Hoặc\x20bằng\x20điện\x20thoại\x20Android.\x20<br>','catch','location','color','brightness_value','connectBleButton','none','Error:\x20','1448EgeDwT','Web\x20Bluetooth\x20API\x20supported\x20in\x20this\x20browser.','Không\x20kết\x20nối',';led_color=',';welcome_text=','logo_text','bluetooth','Current\x20config\x20value:\x20','\x20value\x20=\x20','35mtcreq',';show_number_marker=1','getElementById','Web\x20Bluetooth\x20API\x20is\x20not\x20available\x20in\x20this\x20browser!','disconnectBleButton','startNotifications','getPrimaryService',';led_brightness=','decode','Đã\x20kết\x20nối\x20với\x20ProMax\x20','Error\x20writing\x20to\x20the\x20characteristic:\x20','click','led_color','Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.','Chưa\x20kết\x20nối\x20với\x20ProMax\x20nên\x20không\x20thể\x20gửi\x20lệnh.\x20\x0aHãy\x20kết\x20nối\x20với\x20ProMax!','getCharacteristic','innerHTML','0000180a-0000-1000-8000-00805f9b34fb','DTBK;display_rotation=','gattservicedisconnected'];_0x50b9=function(){return _0x8f32b1;};return _0x50b9();}function parseData(){var _0x9d2e0=_0x484baf;configOutput[_0x9d2e0(0x1c6)]=defaultConfig;var _0x4f2b0c=configOutput['value'];_0x4f2b0c[_0x9d2e0(0x1ff)](';')[_0x9d2e0(0x1cf)](function(_0x40b26e){var _0x46f82e=_0x9d2e0,_0x1d4076=_0x40b26e[_0x46f82e(0x1ff)]('=');console['log']('key\x20=\x20'+_0x1d4076[0x0]+_0x46f82e(0x214)+_0x1d4076[0x1]);var _0x546b88=document[_0x46f82e(0x217)](_0x1d4076[0x0]);typeof _0x546b88!=_0x46f82e(0x1c2)&&_0x546b88!=null&&(_0x1d4076[0x0]==_0x46f82e(0x221)?_0x546b88['value']=_0x1d4076[0x1]['replace']('0x','#'):_0x546b88[_0x46f82e(0x1c6)]=_0x1d4076[0x1]);});}

</script>

</html>
