<!DOCTYPE html>

<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->

<html>
<head>
    <title>Cài đặt ProMax</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
     <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10;
            padding: 0;
            background-color: #f0f0f0;
        }
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div class="topnav">
        <h1>Cài đặt ProMax</h1>
    </div>
    <div class="content">
        <p>
            <button id="connectBleButton" class="connectButton"> Kết nối ProMax </button>
            <button id="disconnectBleButton" class="disconnectButton"> Ngắt kết nối ProMax </button>
        </p>
        <p class="gray-label">Trạng thái kết nối: <strong><span id="bleState" style="color:#d13a30;">Không kết nối</span></strong></p>
   
    </div>
    
    <div id="configBlock" style="display: none;">
    <p>
        <p>
            Sửa giá trị trong bảng dưới rồi ấn <b>Gửi</b>
        </p>
        <table>
            <tr>
                <td>Xoay màn hình</td>
                <td>
                    <select id="display_rotation" onchange="updateConfig()">
                        <option value="0">0 (cổng sạc bên trên)</option>
                        <option value="1">1 (cổng sạc bên trái)</option>
                        <option value="2">2 (cổng sạc bên dưới)</option>
                        <option value="3">3 (cổng sạc bên phải)</option>
                        <option value="4">4 (ảnh ngược, cổng sạc ở trên)</option>
                        <option value="5">5 (ảnh ngược, cổng sạc bên trái)</option>
                        <option value="6">6 (ảnh ngược, cổng sạc bên dưới)</option>
                        <option value="7">7 (ảnh ngược, cổng sạc bên phải)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện đồng hồ</td>
                <td>
                    <select id="show_clock" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện chữ "km/h"</td>
                <td>
                    <select id="show_text_kmh" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện số 0 ... 130 </td>
                <td>
                    <select id="show_number_marker" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Hiện tốc độ khi ko có cam </td>
                <td>
                    <select id="show_speed" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Hiện cờ VN khi khởi động </td>
                <td>
                    <select id="show_logo_at_startup" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Mầu LED cảnh báo</td>
                <td>
                    <input type="color" id="led_color" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng LED cảnh báo</td>
                <td>
                    <input type="range" id="led_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng màn hình khi trời tối</td>
                <td>
                    <input type="range" id="night_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Chữ hiện trên màn hình</td>
                <td>
                    <input type="text" id="logo_text" maxlength="7" onchange="updateConfig()">
                </td>
            </tr>
            
            <tr>
                <td>Cảnh báo tốc độ trễ (*) </td>
                <td>
                    <input type="number" id="speed_limit_offset" min="0" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Dòng chữ khi khởi động </td>
                <td>
                    <input type="text" id="welcome_text" onchange="updateConfig()">
                </td>
            </tr>
        </table>
        * <i>Cảnh báo tốc độ trễ ví dụ tốc độ giới hạn là 50km/h, muốn đi vượt quá 53km/h mới cảnh báo thì nhập 3 </i>
        <p>
           
        </p>
        <table>
            <tr>
                <td>Kết nối đầu đọc obd vgate icar pro 4.0 <br>Chỉ bật khi có đầu đọc</td>
                <td>
                    <select id="obd_scan_duration" onchange="updateConfig()">
                        <option value="0">0 (Tắt)</option>
                        <option value="5">5 (Bật scan 5s)</option>                
                        <option value="10">10 (Bật scan 10s)</option>                
                    </select>
                </td>
            </tr>
          <!--  <tr style="display: none;>
                <td>Tự ngủ sau khi có kết nối (giây) </td>
                <td>
                    <input type="number" id="awake_duration" min="0" onchange="updateConfig()">
                </td>
            </tr>
            <tr style="display: none;>
                <td>Thời gian ngủ (giây) </td>
                <td>
                    <input type="number" id="sleep_duration" min="0" onchange="updateConfig()">
                </td>
            </tr> -->
        </table>    
        
        <p>
            <button onclick="myFunction()">Gửi</button> <strong><span id="sendState" style="color:#24af37;"></span></strong>
        </p>
        <p>
            <input type="text" size="140"  id="configOutput" readonly style="display: none;">
        </p>

        
        
        
    </p>
</div>
</body>

<script>
function _0x6b47(){var _0x593d02=[';obd_scan_duration=0','disconnectBleButton','color','00002a26-0000-1000-8000-00805f9b34fb',';show_speed=1',';night_brightness=','configOutput',';show_text_kmh=','speed_limit_offset','configBlock','Thử\x20mở\x20trang\x20này\x20bằng\x20máy\x20tính\x20và\x20trình\x20duyệt\x20Chrome).<br>','Device\x20Disconnected:','from','target','reload','led_color','bluetooth','night_brightness','readValue','getElementById','Connected\x20to\x20GATT\x20Server','logo_text','Chưa\x20kết\x20nối\x20với\x20thiết\x20bị\x20Bluetooth.','catch','error','373983TZrAuY','map','device','log','show_speed','getCharacteristic','#d13a30','connect','Đang\x20kết\x20nối\x20với\x20ProMax\x20','getPrimaryService','1341489gXLWHp','DTBK;display_rotation=2;show_clock=1;led_color=0xff0000;led_brightness=9;logo_text=MAPVIET;speed_limit_offset=0;welcome_text=;show_text_kmh=1','DTBK;display_rotation=','display_rotation','Found\x20the\x20characteristic:\x20','0000fff2-0000-1000-8000-00805f9b34fb','#24af37','click',';show_logo_at_startup=',';speed_limit_offset=','Error\x20writing\x20to\x20the\x20characteristic:\x20','value','\x20value\x20=\x20','Web\x20Bluetooth\x20API\x20supported\x20in\x20this\x20browser.','Characteristic\x20discovered:','connected','location','characteristicvaluechanged','Decoded\x20value:\x20','2192022EVzVRb','show_text_kmh','then','385VjVknt','name','style','91mNpjyS','Web\x20Bluetooth\x20API\x20is\x20not\x20available\x20in\x20this\x20browser!','startNotifications','bleState','brightness_value','disconnect','key\x20=\x20','obd_scan_duration','Chưa\x20kết\x20nối\x20với\x20ProMax\x20nên\x20không\x20thể\x20gửi\x20lệnh.\x20\x0aHãy\x20kết\x20nối\x20với\x20ProMax!','writeValueWithoutResponse','Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.',';show_speed=','0000180a-0000-1000-8000-00805f9b34fb','uuid','52048PgoCvt','addEventListener','Device\x20Selected:','VIETMAP_HUD','Trình\x20duyệt\x20này\x20(thiết\x20bị\x20này)\x20không\x20hỗ\x20trợ!<br>\x20','split','welcome_text','Disconnect\x20Device.',';show_clock=','gatt','Không\x20kết\x20nối','decode','alert','LOAD','4027720Hlelpd','display','replace','show_clock',';led_color=',';show_number_marker=','Bluetooth\x20is\x20not\x20connected.','Error:\x20','innerHTML','Try\x20to\x20get\x20characteristic','connectBleButton','led_brightness','3303873OfbjSP','329286CbKhZO'];_0x6b47=function(){return _0x593d02;};return _0x6b47();}var _0x4cc7d5=_0x2e80;(function(_0x116258,_0x10e28b){var _0x16813d=_0x2e80,_0x3920dc=_0x116258();while(!![]){try{var _0x21f762=-parseInt(_0x16813d(0x154))/0x1+parseInt(_0x16813d(0x171))/0x2+parseInt(_0x16813d(0x15e))/0x3+parseInt(_0x16813d(0x185))/0x4*(parseInt(_0x16813d(0x174))/0x5)+-parseInt(_0x16813d(0x1a0))/0x6*(parseInt(_0x16813d(0x177))/0x7)+-parseInt(_0x16813d(0x193))/0x8+-parseInt(_0x16813d(0x19f))/0x9;if(_0x21f762===_0x10e28b)break;else _0x3920dc['push'](_0x3920dc['shift']());}catch(_0x227c24){_0x3920dc['push'](_0x3920dc['shift']());}}}(_0x6b47,0x8f55c));const connectButton=document[_0x4cc7d5(0x14e)](_0x4cc7d5(0x19d)),disconnectButton=document[_0x4cc7d5(0x14e)](_0x4cc7d5(0x1a2)),bleStateContainer=document[_0x4cc7d5(0x14e)](_0x4cc7d5(0x17a)),brightnessSlider=document['getElementById'](_0x4cc7d5(0x19e)),brightnessValue=document[_0x4cc7d5(0x14e)](_0x4cc7d5(0x17b)),configBlock=document[_0x4cc7d5(0x14e)](_0x4cc7d5(0x1aa)),configOutput=document['getElementById'](_0x4cc7d5(0x1a7));var deviceName=_0x4cc7d5(0x188),bleService='0000fff0-0000-1000-8000-00805f9b34fb',configCharacteristic=_0x4cc7d5(0x163),sensorCharacteristic='0000fff1-0000-1000-8000-00805f9b34fb',deviceInfoService=_0x4cc7d5(0x183),firmwareRevisionCharacteristic=_0x4cc7d5(0x1a4),bleServer,defaultConfig=_0x4cc7d5(0x15f)+_0x4cc7d5(0x1a1)+';night_brightness=5'+_0x4cc7d5(0x1a5)+';show_number_marker=1'+';show_logo_at_startup=0';connectButton[_0x4cc7d5(0x186)](_0x4cc7d5(0x165),_0x3b9f58=>{isWebBluetoothEnabled()&&connectToDevice();}),disconnectButton[_0x4cc7d5(0x186)](_0x4cc7d5(0x165),disconnectDevice);function isWebBluetoothEnabled(){var _0x5af502=_0x4cc7d5;if(!navigator[_0x5af502(0x1b1)])return console[_0x5af502(0x157)](_0x5af502(0x178)),bleStateContainer[_0x5af502(0x19b)]=_0x5af502(0x189)+_0x5af502(0x1ab)+'Hoặc\x20bằng\x20điện\x20thoại\x20Android.\x20<br>'+'Hoặc\x20bằng\x20ứng\x20dụng\x20<a\x20href=\x22https://apps.apple.com/us/app/bluefy-web-ble-browser/id1492822055\x22>Bluefy</a>\x20trên\x20iPhone.',![];return console['log'](_0x5af502(0x16b)),!![];}function connectToDevice(){var _0xe447fb=_0x4cc7d5;console[_0xe447fb(0x157)]('Initializing\x20Bluetooth...'),navigator['bluetooth']['requestDevice']({'filters':[{'name':deviceName}],'optionalServices':[bleService,deviceInfoService]})['then'](_0x4f527e=>{var _0x288d15=_0xe447fb;return console[_0x288d15(0x157)](_0x288d15(0x187),_0x4f527e['name']),bleStateContainer[_0x288d15(0x19b)]=_0x288d15(0x15c),bleStateContainer['style'][_0x288d15(0x1a3)]='#242237',_0x4f527e[_0x288d15(0x186)]('gattservicedisconnected',onDisconnected),_0x4f527e[_0x288d15(0x18e)][_0x288d15(0x15b)]();})[_0xe447fb(0x173)](_0x233280=>{var _0x3eb40d=_0xe447fb;return bleServer=_0x233280,console[_0x3eb40d(0x157)](_0x3eb40d(0x14f)),bleServer[_0x3eb40d(0x15d)](deviceInfoService);})[_0xe447fb(0x173)](_0x279ff3=>{var _0x4bae36=_0xe447fb;return console[_0x4bae36(0x157)](_0x4bae36(0x19c)),_0x279ff3[_0x4bae36(0x159)](firmwareRevisionCharacteristic);})[_0xe447fb(0x173)](_0x1507c9=>{var _0x3c9014=_0xe447fb;return console[_0x3c9014(0x157)]('Try\x20to\x20read\x20revision\x20value'),_0x1507c9[_0x3c9014(0x1b3)]();})[_0xe447fb(0x173)](_0xbb5f3f=>{var _0xd6e631=_0xe447fb;console[_0xd6e631(0x157)]('Read\x20value:\x20',_0xbb5f3f);const _0xe22733=new TextDecoder()[_0xd6e631(0x190)](_0xbb5f3f);bleStateContainer[_0xd6e631(0x176)][_0xd6e631(0x1a3)]=_0xd6e631(0x164),bleStateContainer['innerHTML']='Đã\x20kết\x20nối\x20với\x20ProMax\x20'+_0xe22733,configBlock[_0xd6e631(0x176)]['display']='block',console[_0xd6e631(0x157)](_0xd6e631(0x170),_0xe22733),parseData(),loadCurrentConfig();})[_0xe447fb(0x152)](_0xa5339f=>{var _0x16e693=_0xe447fb;console[_0x16e693(0x157)](_0x16e693(0x19a),_0xa5339f);});}function onDisconnected(_0x5dc6dc){var _0x25a856=_0x4cc7d5;console['log'](_0x25a856(0x1ac),_0x5dc6dc[_0x25a856(0x1ae)][_0x25a856(0x156)][_0x25a856(0x175)]),bleStateContainer[_0x25a856(0x19b)]=_0x25a856(0x18f),bleStateContainer['style'][_0x25a856(0x1a3)]=_0x25a856(0x15a),connectToDevice();}function _0x2e80(_0x40b8ea,_0x31b3ed){var _0x6b4722=_0x6b47();return _0x2e80=function(_0x2e8073,_0x4bc187){_0x2e8073=_0x2e8073-0x14e;var _0x12e5d7=_0x6b4722[_0x2e8073];return _0x12e5d7;},_0x2e80(_0x40b8ea,_0x31b3ed);}function loadCurrentConfig(){var _0x27e5f3=_0x4cc7d5;bleServer&&bleServer['connected']?(bleServer['getPrimaryService'](bleService)[_0x27e5f3(0x173)](_0x51fb0f=>{var _0x385d6f=_0x27e5f3;return _0x51fb0f[_0x385d6f(0x159)](sensorCharacteristic);})[_0x27e5f3(0x173)](_0x49fcb8=>{var _0x3e349a=_0x27e5f3;console['log'](_0x3e349a(0x16c),_0x49fcb8['uuid']),_0x49fcb8[_0x3e349a(0x186)](_0x3e349a(0x16f),handleCharacteristicChange),_0x49fcb8[_0x3e349a(0x179)]();})[_0x27e5f3(0x152)](_0x4c3416=>{var _0x4d2730=_0x27e5f3;console[_0x4d2730(0x153)](_0x4d2730(0x19a),_0x4c3416);}),bleServer[_0x27e5f3(0x15d)](bleService)['then'](_0x2eafc5=>{var _0x305732=_0x27e5f3;return _0x2eafc5[_0x305732(0x159)](configCharacteristic);})[_0x27e5f3(0x173)](_0xc92979=>{var _0x2773c0=_0x27e5f3;console[_0x2773c0(0x157)](_0x2773c0(0x162),_0xc92979[_0x2773c0(0x184)]);var _0x4de167=_0x2773c0(0x192);const _0x4017bd=Uint8Array['from'](_0x4de167[_0x2773c0(0x18a)]('')[_0x2773c0(0x155)](_0x231301=>_0x231301['charCodeAt']()));return _0xc92979[_0x2773c0(0x180)](_0x4017bd);})[_0x27e5f3(0x152)](_0x586a30=>{var _0x7b40fd=_0x27e5f3;console[_0x7b40fd(0x153)](_0x7b40fd(0x168),_0x586a30);})):console['error']('Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.');}function handleCharacteristicChange(_0x30b321){var _0x5c01e5=_0x4cc7d5;const _0x179cde=new TextDecoder()[_0x5c01e5(0x190)](_0x30b321[_0x5c01e5(0x1ae)][_0x5c01e5(0x169)]);console[_0x5c01e5(0x157)]('Current\x20config\x20value:\x20',_0x179cde),_0x179cde!=''&&(defaultConfig=_0x179cde,parseData());}function myFunction(){var _0x3c4df1=_0x4cc7d5;bleServer&&bleServer['connected']?bleServer[_0x3c4df1(0x15d)](bleService)[_0x3c4df1(0x173)](_0x3ed322=>{var _0x59610c=_0x3c4df1;return _0x3ed322[_0x59610c(0x159)](configCharacteristic);})[_0x3c4df1(0x173)](_0x1b1086=>{var _0x2d9922=_0x3c4df1;console[_0x2d9922(0x157)](_0x2d9922(0x162),_0x1b1086[_0x2d9922(0x184)]);var _0x3c0547=document[_0x2d9922(0x14e)]('configOutput')['value'];const _0xe2258b=Uint8Array[_0x2d9922(0x1ad)](_0x3c0547[_0x2d9922(0x18a)]('')[_0x2d9922(0x155)](_0x37587b=>_0x37587b['charCodeAt']()));return _0x1b1086[_0x2d9922(0x180)](_0xe2258b);})[_0x3c4df1(0x173)](_0x4bb9cf=>{var _0x411869=_0x3c4df1;sendState[_0x411869(0x19b)]='Đã\x20gửi!\x20Reload\x20sau\x203s',setTimeout(()=>window[_0x411869(0x16e)][_0x411869(0x1af)](),0xbb8);})[_0x3c4df1(0x152)](_0xcf09e2=>{var _0x2f2562=_0x3c4df1;console[_0x2f2562(0x153)](_0x2f2562(0x168),_0xcf09e2);}):(console['error'](_0x3c4df1(0x181)),window['alert'](_0x3c4df1(0x17f)));}function disconnectDevice(){var _0x4db834=_0x4cc7d5;console['log'](_0x4db834(0x18c)),bleServer&&bleServer[_0x4db834(0x16d)]?(bleServer[_0x4db834(0x17c)](),console[_0x4db834(0x157)]('Device\x20Disconnected'),bleStateContainer[_0x4db834(0x19b)]='Không\x20kết\x20nối',bleStateContainer[_0x4db834(0x176)]['color']='#d13a30',configBlock['style'][_0x4db834(0x194)]='none'):(console[_0x4db834(0x153)](_0x4db834(0x199)),window[_0x4db834(0x191)](_0x4db834(0x151)));}function updateConfig(){var _0x5243fc=_0x4cc7d5,_0x1d76e0=document[_0x5243fc(0x14e)](_0x5243fc(0x1b0))[_0x5243fc(0x169)]['replace']('#','0x'),_0x1c3e28=_0x5243fc(0x160)+document[_0x5243fc(0x14e)](_0x5243fc(0x161))[_0x5243fc(0x169)]+_0x5243fc(0x18d)+document[_0x5243fc(0x14e)](_0x5243fc(0x196))[_0x5243fc(0x169)]+_0x5243fc(0x197)+_0x1d76e0+';led_brightness='+document['getElementById'](_0x5243fc(0x19e))[_0x5243fc(0x169)]+';logo_text='+document[_0x5243fc(0x14e)](_0x5243fc(0x150))[_0x5243fc(0x169)]+_0x5243fc(0x167)+document[_0x5243fc(0x14e)](_0x5243fc(0x1a9))['value']+_0x5243fc(0x1a6)+document[_0x5243fc(0x14e)](_0x5243fc(0x1b2))['value']+';welcome_text='+document[_0x5243fc(0x14e)](_0x5243fc(0x18b))[_0x5243fc(0x169)]+_0x5243fc(0x1a8)+document[_0x5243fc(0x14e)](_0x5243fc(0x172))['value']+_0x5243fc(0x182)+document[_0x5243fc(0x14e)](_0x5243fc(0x158))[_0x5243fc(0x169)]+';obd_scan_duration='+document[_0x5243fc(0x14e)](_0x5243fc(0x17e))[_0x5243fc(0x169)]+_0x5243fc(0x198)+document['getElementById']('show_number_marker')[_0x5243fc(0x169)]+_0x5243fc(0x166)+document[_0x5243fc(0x14e)]('show_logo_at_startup')[_0x5243fc(0x169)];configOutput[_0x5243fc(0x169)]=_0x1c3e28;}function parseData(){var _0x35c1ef=_0x4cc7d5;configOutput[_0x35c1ef(0x169)]=defaultConfig;var _0x132d69=configOutput[_0x35c1ef(0x169)];_0x132d69[_0x35c1ef(0x18a)](';')['forEach'](function(_0x5413a0){var _0x23ab42=_0x35c1ef,_0x1cc90e=_0x5413a0['split']('=');console[_0x23ab42(0x157)](_0x23ab42(0x17d)+_0x1cc90e[0x0]+_0x23ab42(0x16a)+_0x1cc90e[0x1]);var _0x154445=document['getElementById'](_0x1cc90e[0x0]);typeof _0x154445!='undefined'&&_0x154445!=null&&(_0x1cc90e[0x0]==_0x23ab42(0x1b0)?_0x154445[_0x23ab42(0x169)]=_0x1cc90e[0x1][_0x23ab42(0x195)]('0x','#'):_0x154445[_0x23ab42(0x169)]=_0x1cc90e[0x1]);});}

</script>

</html>
