<!DOCTYPE html>

<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->

<html>
<head>
    <title>Cài đặt ProMax</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
     <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10;
            padding: 0;
            background-color: #f0f0f0;
        }
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div class="topnav">
        <h1>Cài đặt ProMax</h1>
    </div>
    <div class="content">
        <p>
            <button id="connectBleButton" class="connectButton"> Kết nối ProMax </button>
            <button id="disconnectBleButton" class="disconnectButton"> Ngắt kết nối ProMax </button>
        </p>
        <p class="gray-label">Trạng thái kết nối: <strong><span id="bleState" style="color:#d13a30;">Không kết nối</span></strong></p>
   
    </div>
    
    <div id="configBlock" style="display: none;">
    <p>
        <p>
            Sửa giá trị trong bảng dưới rồi ấn <b>Gửi</b>
        </p>
        <table>
            <tr>
                <td>Xoay màn hình</td>
                <td>
                    <select id="display_rotation" onchange="updateConfig()">
                        <option value="0">0 (cổng sạc bên trên)</option>
                        <option value="1">1 (cổng sạc bên trái)</option>
                        <option value="2">2 (cổng sạc bên dưới)</option>
                        <option value="3">3 (cổng sạc bên phải)</option>
                        <option value="4">4 (ảnh ngược, cổng sạc ở trên)</option>
                        <option value="5">5 (ảnh ngược, cổng sạc bên trái)</option>
                        <option value="6">6 (ảnh ngược, cổng sạc bên dưới)</option>
                        <option value="7">7 (ảnh ngược, cổng sạc bên phải)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện đồng hồ</td>
                <td>
                    <select id="show_clock" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện chữ "km/h"</td>
                <td>
                    <select id="show_text_kmh" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện số 0 ... 130 </td>
                <td>
                    <select id="show_number_marker" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Hiện tốc độ khi ko có cam </td>
                <td>
                    <select id="show_speed" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
            <tr>
                <td>Mầu LED cảnh báo</td>
                <td>
                    <input type="color" id="led_color" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng LED cảnh báo</td>
                <td>
                    <input type="range" id="led_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng màn hình khi trời tối</td>
                <td>
                    <input type="range" id="night_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Chữ hiện trên màn hình</td>
                <td>
                    <input type="text" id="logo_text" maxlength="7" onchange="updateConfig()">
                </td>
            </tr>
            
            <tr>
                <td>Cảnh báo tốc độ trễ (*) </td>
                <td>
                    <input type="number" id="speed_limit_offset" min="0" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Dòng chữ khi khởi động </td>
                <td>
                    <input type="text" id="welcome_text" onchange="updateConfig()">
                </td>
            </tr>
        </table>
        * <i>Cảnh báo tốc độ trễ ví dụ tốc độ giới hạn là 50km/h, muốn đi vượt quá 53km/h mới cảnh báo thì nhập 3 </i>
        <p>
           
        </p>
        <table>
            <tr>
                <td>Kết nối đầu đọc obd vgate icar pro 4.0 <br>Chỉ bật khi có đầu đọc</td>
                <td>
                    <select id="obd_scan_duration" onchange="updateConfig()">
                        <option value="0">0 (Tắt)</option>
                        <option value="5">5 (Bật scan 5s)</option>                
                        <option value="10">10 (Bật scan 10s)</option>                
                    </select>
                </td>
            </tr>
          <!--  <tr style="display: none;>
                <td>Tự ngủ sau khi có kết nối (giây) </td>
                <td>
                    <input type="number" id="awake_duration" min="0" onchange="updateConfig()">
                </td>
            </tr>
            <tr style="display: none;>
                <td>Thời gian ngủ (giây) </td>
                <td>
                    <input type="number" id="sleep_duration" min="0" onchange="updateConfig()">
                </td>
            </tr> -->
        </table>    
        
        <p>
            <button onclick="myFunction()">Gửi</button> <strong><span id="sendState" style="color:#24af37;"></span></strong>
        </p>
        <p>
            <input type="text" size="140"  id="configOutput" readonly style="display: none;">
        </p>

        
        
        
    </p>
</div>
</body>

<script>
   var _0x19f4a6=_0x2e37;(function(_0x51aaae,_0x1d5c56){var _0x2cbf61=_0x2e37,_0x51a326=_0x51aaae();while(!![]){try{var _0x427888=-parseInt(_0x2cbf61(0x13e))/0x1*(-parseInt(_0x2cbf61(0x12f))/0x2)+parseInt(_0x2cbf61(0x159))/0x3*(-parseInt(_0x2cbf61(0x107))/0x4)+-parseInt(_0x2cbf61(0xf6))/0x5*(-parseInt(_0x2cbf61(0x104))/0x6)+parseInt(_0x2cbf61(0x140))/0x7+-parseInt(_0x2cbf61(0x113))/0x8*(parseInt(_0x2cbf61(0x124))/0x9)+parseInt(_0x2cbf61(0x11e))/0xa+-parseInt(_0x2cbf61(0x148))/0xb;if(_0x427888===_0x1d5c56)break;else _0x51a326['push'](_0x51a326['shift']());}catch(_0x97602d){_0x51a326['push'](_0x51a326['shift']());}}}(_0x5f77,0x82069));const connectButton=document[_0x19f4a6(0x14a)](_0x19f4a6(0xfb)),disconnectButton=document[_0x19f4a6(0x14a)]('disconnectBleButton'),bleStateContainer=document['getElementById'](_0x19f4a6(0x120)),brightnessSlider=document[_0x19f4a6(0x14a)](_0x19f4a6(0xf9)),brightnessValue=document['getElementById']('brightness_value'),configBlock=document[_0x19f4a6(0x14a)](_0x19f4a6(0xfc)),configOutput=document[_0x19f4a6(0x14a)](_0x19f4a6(0x139));var deviceName=_0x19f4a6(0xf7),bleService=_0x19f4a6(0x12d),configCharacteristic=_0x19f4a6(0x14d),sensorCharacteristic=_0x19f4a6(0x123),deviceInfoService=_0x19f4a6(0x153),firmwareRevisionCharacteristic=_0x19f4a6(0x13b),bleServer,defaultConfig=_0x19f4a6(0x12b)+_0x19f4a6(0x129)+_0x19f4a6(0x152)+_0x19f4a6(0x141)+_0x19f4a6(0x15a);function _0x2e37(_0x1305b3,_0x5c86ad){var _0x5f7731=_0x5f77();return _0x2e37=function(_0x2e375e,_0x40314a){_0x2e375e=_0x2e375e-0xf5;var _0x57e1e0=_0x5f7731[_0x2e375e];return _0x57e1e0;},_0x2e37(_0x1305b3,_0x5c86ad);}connectButton['addEventListener'](_0x19f4a6(0x12e),_0x35188c=>{isWebBluetoothEnabled()&&connectToDevice();}),disconnectButton[_0x19f4a6(0x156)](_0x19f4a6(0x12e),disconnectDevice);function isWebBluetoothEnabled(){var _0x223192=_0x19f4a6;if(!navigator['bluetooth'])return console[_0x223192(0x147)](_0x223192(0xff)),bleStateContainer[_0x223192(0x10e)]=_0x223192(0x155),![];return console['log']('Web\x20Bluetooth\x20API\x20supported\x20in\x20this\x20browser.'),!![];}function connectToDevice(){var _0xf246cd=_0x19f4a6;console[_0xf246cd(0x147)](_0xf246cd(0xfa)),navigator[_0xf246cd(0x130)][_0xf246cd(0x157)]({'filters':[{'name':deviceName}],'optionalServices':[bleService,deviceInfoService]})[_0xf246cd(0x134)](_0x2af58f=>{var _0xa92f8c=_0xf246cd;return console[_0xa92f8c(0x147)](_0xa92f8c(0x110),_0x2af58f[_0xa92f8c(0x103)]),bleStateContainer[_0xa92f8c(0x10e)]=_0xa92f8c(0x14e),bleStateContainer[_0xa92f8c(0x101)][_0xa92f8c(0x112)]=_0xa92f8c(0x108),_0x2af58f['addEventListener'](_0xa92f8c(0x125),onDisconnected),_0x2af58f[_0xa92f8c(0x133)]['connect']();})[_0xf246cd(0x134)](_0x1f2147=>{var _0x539d96=_0xf246cd;return bleServer=_0x1f2147,console['log'](_0x539d96(0x151)),bleServer[_0x539d96(0x11b)](deviceInfoService);})[_0xf246cd(0x134)](_0x4d03f2=>{var _0xde06eb=_0xf246cd;return console[_0xde06eb(0x147)]('Try\x20to\x20get\x20characteristic'),_0x4d03f2[_0xde06eb(0x14f)](firmwareRevisionCharacteristic);})[_0xf246cd(0x134)](_0x2a1acd=>{var _0x2f2dce=_0xf246cd;return console['log'](_0x2f2dce(0xfe)),_0x2a1acd[_0x2f2dce(0x118)]();})[_0xf246cd(0x134)](_0x4da025=>{var _0x19f503=_0xf246cd;console['log']('Read\x20value:\x20',_0x4da025);const _0x18a978=new TextDecoder()[_0x19f503(0x126)](_0x4da025);bleStateContainer[_0x19f503(0x101)]['color']='#24af37',bleStateContainer[_0x19f503(0x10e)]=_0x19f503(0x10b)+_0x18a978,configBlock['style'][_0x19f503(0x144)]=_0x19f503(0x116),console['log'](_0x19f503(0x12a),_0x18a978),parseData(),loadCurrentConfig();})[_0xf246cd(0x10a)](_0x49d79a=>{var _0x2fd9c6=_0xf246cd;console[_0x2fd9c6(0x147)](_0x2fd9c6(0xf8),_0x49d79a);});}function onDisconnected(_0x439036){var _0x32acd3=_0x19f4a6;console[_0x32acd3(0x147)](_0x32acd3(0x12c),_0x439036[_0x32acd3(0xfd)][_0x32acd3(0x132)][_0x32acd3(0x103)]),bleStateContainer['innerHTML']=_0x32acd3(0x150),bleStateContainer[_0x32acd3(0x101)][_0x32acd3(0x112)]='#d13a30',connectToDevice();}function loadCurrentConfig(){var _0x1e3c33=_0x19f4a6;bleServer&&bleServer[_0x1e3c33(0x13d)]?(bleServer[_0x1e3c33(0x11b)](bleService)['then'](_0x97721=>{return _0x97721['getCharacteristic'](sensorCharacteristic);})[_0x1e3c33(0x134)](_0x8cdf54=>{var _0x59a793=_0x1e3c33;console[_0x59a793(0x147)](_0x59a793(0x127),_0x8cdf54[_0x59a793(0x158)]),_0x8cdf54[_0x59a793(0x156)]('characteristicvaluechanged',handleCharacteristicChange),_0x8cdf54['startNotifications']();})['catch'](_0x1b9acb=>{var _0x43d26b=_0x1e3c33;console[_0x43d26b(0x15d)](_0x43d26b(0xf8),_0x1b9acb);}),bleServer['getPrimaryService'](bleService)[_0x1e3c33(0x134)](_0x488422=>{var _0x4f616b=_0x1e3c33;return _0x488422[_0x4f616b(0x14f)](configCharacteristic);})[_0x1e3c33(0x134)](_0x13c4b6=>{var _0x416a71=_0x1e3c33;console['log'](_0x416a71(0x10c),_0x13c4b6[_0x416a71(0x158)]);var _0x1e798b=_0x416a71(0x105);const _0x3908d3=Uint8Array['from'](_0x1e798b[_0x416a71(0x10f)]('')['map'](_0x15bf52=>_0x15bf52[_0x416a71(0xf5)]()));return _0x13c4b6[_0x416a71(0x131)](_0x3908d3);})['catch'](_0x5a6718=>{var _0x154573=_0x1e3c33;console[_0x154573(0x15d)](_0x154573(0x115),_0x5a6718);})):console['error']('Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.');}function handleCharacteristicChange(_0x4a4f2f){var _0x6ade63=_0x19f4a6;const _0x210449=new TextDecoder()[_0x6ade63(0x126)](_0x4a4f2f[_0x6ade63(0xfd)][_0x6ade63(0x11a)]);console[_0x6ade63(0x147)](_0x6ade63(0x14c),_0x210449),_0x210449!=''&&(defaultConfig=_0x210449,parseData());}function _0x5f77(){var _0x5da6d5=[';led_brightness=','configOutput','map','00002a26-0000-1000-8000-00805f9b34fb','location','connected','79933QGHSmJ','replace','4616339QVEdyS',';show_speed=1','DTBK;display_rotation=','Đã\x20gửi!\x20Reload\x20sau\x203s','display','alert','show_text_kmh','log','2336653XtNPPa',';obd_scan_duration=','getElementById','show_clock','Current\x20config\x20value:\x20','0000fff2-0000-1000-8000-00805f9b34fb','Đang\x20kết\x20nối\x20với\x20ProMax\x20','getCharacteristic','Không\x20kết\x20nối','Connected\x20to\x20GATT\x20Server',';night_brightness=5','0000180a-0000-1000-8000-00805f9b34fb',';show_number_marker=','Trình\x20duyệt\x20này\x20(thiết\x20bị\x20này)\x20không\x20hỗ\x20trợ!<br>\x20(Thử\x20mở\x20trang\x20này\x20bằng\x20máy\x20tính\x20và\x20trình\x20duyệt\x20Chrome)','addEventListener','requestDevice','uuid','2046546QsevMh',';show_number_marker=1','night_brightness',';speed_limit_offset=','error','charCodeAt','5spixFq','VIETMAP_HUD','Error:\x20','led_brightness','Initializing\x20Bluetooth...','connectBleButton','configBlock','target','Try\x20to\x20read\x20revision\x20value','Web\x20Bluetooth\x20API\x20is\x20not\x20available\x20in\x20this\x20browser!','Device\x20Disconnected','style',';night_brightness=','name','3056736lvGOHp','LOAD',';welcome_text=','4MdeATc','#242237','Disconnect\x20Device.','catch','Đã\x20kết\x20nối\x20với\x20ProMax\x20','Found\x20the\x20characteristic:\x20','obd_scan_duration','innerHTML','split','Device\x20Selected:','Chưa\x20kết\x20nối\x20với\x20thiết\x20bị\x20Bluetooth.','color','224wgdqbx',';show_speed=','Error\x20writing\x20to\x20the\x20characteristic:\x20','block','undefined','readValue','#d13a30','value','getPrimaryService',';logo_text=','speed_limit_offset','5718430HeTyks','show_number_marker','bleState','show_speed','Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.','0000fff1-0000-1000-8000-00805f9b34fb','152181fenKKZ','gattservicedisconnected','decode','Characteristic\x20discovered:','display_rotation',';obd_scan_duration=0','Decoded\x20value:\x20','DTBK;display_rotation=2;show_clock=1;led_color=0xff0000;led_brightness=9;logo_text=MAPVIET;speed_limit_offset=0;welcome_text=;show_text_kmh=1','Device\x20Disconnected:','0000fff0-0000-1000-8000-00805f9b34fb','click','4FlpmvU','bluetooth','writeValueWithoutResponse','device','gatt','then','Bluetooth\x20is\x20not\x20connected.','from','led_color'];_0x5f77=function(){return _0x5da6d5;};return _0x5f77();}function myFunction(){var _0x49d749=_0x19f4a6;bleServer&&bleServer[_0x49d749(0x13d)]?bleServer[_0x49d749(0x11b)](bleService)[_0x49d749(0x134)](_0x1386fd=>{var _0x140de9=_0x49d749;return _0x1386fd[_0x140de9(0x14f)](configCharacteristic);})[_0x49d749(0x134)](_0x465741=>{var _0x41efa1=_0x49d749;console[_0x41efa1(0x147)]('Found\x20the\x20characteristic:\x20',_0x465741[_0x41efa1(0x158)]);var _0x3ad137=document[_0x41efa1(0x14a)](_0x41efa1(0x139))[_0x41efa1(0x11a)];const _0x18a196=Uint8Array[_0x41efa1(0x136)](_0x3ad137[_0x41efa1(0x10f)]('')[_0x41efa1(0x13a)](_0x3e7f07=>_0x3e7f07[_0x41efa1(0xf5)]()));return _0x465741[_0x41efa1(0x131)](_0x18a196);})[_0x49d749(0x134)](_0x479185=>{var _0x4dbe13=_0x49d749;sendState[_0x4dbe13(0x10e)]=_0x4dbe13(0x143),setTimeout(()=>window[_0x4dbe13(0x13c)]['reload'](),0xbb8);})[_0x49d749(0x10a)](_0x2531f0=>{var _0x35ea09=_0x49d749;console['error'](_0x35ea09(0x115),_0x2531f0);}):(console[_0x49d749(0x15d)](_0x49d749(0x122)),window[_0x49d749(0x145)]('Chưa\x20kết\x20nối\x20với\x20ProMax\x20nên\x20không\x20thể\x20gửi\x20lệnh.\x20\x0aHãy\x20kết\x20nối\x20với\x20ProMax!'));}function disconnectDevice(){var _0x4985dd=_0x19f4a6;console[_0x4985dd(0x147)](_0x4985dd(0x109)),bleServer&&bleServer['connected']?(bleServer['disconnect'](),console[_0x4985dd(0x147)](_0x4985dd(0x100)),bleStateContainer['innerHTML']=_0x4985dd(0x150),bleStateContainer[_0x4985dd(0x101)]['color']=_0x4985dd(0x119),configBlock[_0x4985dd(0x101)][_0x4985dd(0x144)]='none'):(console[_0x4985dd(0x15d)](_0x4985dd(0x135)),window['alert'](_0x4985dd(0x111)));}function updateConfig(){var _0x767a8e=_0x19f4a6,_0x58cc9a=document[_0x767a8e(0x14a)](_0x767a8e(0x137))[_0x767a8e(0x11a)][_0x767a8e(0x13f)]('#','0x'),_0x50699e=_0x767a8e(0x142)+document['getElementById'](_0x767a8e(0x128))[_0x767a8e(0x11a)]+';show_clock='+document['getElementById'](_0x767a8e(0x14b))['value']+';led_color='+_0x58cc9a+_0x767a8e(0x138)+document[_0x767a8e(0x14a)](_0x767a8e(0xf9))['value']+_0x767a8e(0x11c)+document[_0x767a8e(0x14a)]('logo_text')['value']+_0x767a8e(0x15c)+document[_0x767a8e(0x14a)](_0x767a8e(0x11d))[_0x767a8e(0x11a)]+_0x767a8e(0x102)+document[_0x767a8e(0x14a)](_0x767a8e(0x15b))[_0x767a8e(0x11a)]+_0x767a8e(0x106)+document['getElementById']('welcome_text')['value']+';show_text_kmh='+document['getElementById'](_0x767a8e(0x146))[_0x767a8e(0x11a)]+_0x767a8e(0x114)+document[_0x767a8e(0x14a)](_0x767a8e(0x121))[_0x767a8e(0x11a)]+_0x767a8e(0x149)+document[_0x767a8e(0x14a)](_0x767a8e(0x10d))[_0x767a8e(0x11a)]+_0x767a8e(0x154)+document[_0x767a8e(0x14a)](_0x767a8e(0x11f))[_0x767a8e(0x11a)];configOutput['value']=_0x50699e;}function parseData(){var _0x187667=_0x19f4a6;configOutput['value']=defaultConfig;var _0x1b08ad=configOutput[_0x187667(0x11a)];_0x1b08ad[_0x187667(0x10f)](';')['forEach'](function(_0x3398c3){var _0x59fc2a=_0x187667,_0xc041fd=_0x3398c3[_0x59fc2a(0x10f)]('=');console[_0x59fc2a(0x147)]('key\x20=\x20'+_0xc041fd[0x0]+'\x20value\x20=\x20'+_0xc041fd[0x1]);var _0x1bdc2a=document['getElementById'](_0xc041fd[0x0]);typeof _0x1bdc2a!=_0x59fc2a(0x117)&&_0x1bdc2a!=null&&(_0xc041fd[0x0]==_0x59fc2a(0x137)?_0x1bdc2a[_0x59fc2a(0x11a)]=_0xc041fd[0x1][_0x59fc2a(0x13f)]('0x','#'):_0x1bdc2a['value']=_0xc041fd[0x1]);});}

</script>

</html>
