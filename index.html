<!DOCTYPE html>

<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->
<!-- Bác tìm kiếm gì ở đây? -->

<html>
<head>
    <title>Cài đặt ProMax</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
     <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10;
            padding: 0;
            background-color: #f0f0f0;
        }
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <div class="topnav">
        <h1>Cài đặt ProMax</h1>
    </div>
    <div class="content">
        <p>
            <button id="connectBleButton" class="connectButton"> Kết nối ProMax </button>
            <button id="disconnectBleButton" class="disconnectButton"> Ngắt kết nối ProMax </button>
        </p>
        <p class="gray-label">Trạng thái kết nối: <strong><span id="bleState" style="color:#d13a30;">Không kết nối</span></strong></p>
   
    </div>
    
    <div id="configBlock" style="display: none;">
    <p>
        <p>
            Sửa giá trị trong bảng dưới rồi ấn <b>Gửi</b>
        </p>
        <table>
            <tr>
                <td>Xoay màn hình</td>
                <td>
                    <select id="display_rotation" onchange="updateConfig()">
                        <option value="0">0 (cổng sạc bên trên)</option>
                        <option value="1">1 (cổng sạc bên trái)</option>
                        <option value="2">2 (cổng sạc bên dưới)</option>
                        <option value="3">3 (cổng sạc bên phải)</option>
                        <option value="4">4 (ảnh ngược, cổng sạc ở trên)</option>
                        <option value="5">5 (ảnh ngược, cổng sạc bên trái)</option>
                        <option value="6">6 (ảnh ngược, cổng sạc bên dưới)</option>
                        <option value="7">7 (ảnh ngược, cổng sạc bên phải)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện đồng hồ</td>
                <td>
                    <select id="show_clock" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện chữ "km/h"</td>
                <td>
                    <select id="show_text_kmh" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Ẩn hiện số 0 ... 130 </td>
                <td>
                    <select id="show_number_marker" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Hiện tốc độ khi ko có cam </td>
                <td>
                    <select id="show_speed" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Hiện cờ VN khi khởi động </td>
                <td>
                    <select id="show_logo_at_startup" onchange="updateConfig()">
                        <option value="1">1 (Hiện)</option>
                        <option value="0">0 (Ẩn)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Kêu bip khi tốc độ giới hạn thay đổi </td>
                <td>
                    <select id="beep_limit_change" onchange="updateConfig()">
                        <option value="1">1 (Kêu)</option>
                        <option value="0">0 (Ko kêu)</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Mầu LED cảnh báo</td>
                <td>
                    <input type="color" id="led_color" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng LED cảnh báo</td>
                <td>
                    <input type="range" id="led_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Độ sáng màn hình khi trời tối</td>
                <td>
                    <input type="range" id="night_brightness" min="0" max="10" oninput="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Chữ hiện trên màn hình</td>
                <td>
                    <input type="text" id="logo_text" maxlength="7" onchange="updateConfig()">
                </td>
            </tr>
            
            <tr>
                <td>Cảnh báo tốc độ trễ (*) </td>
                <td>
                    <input type="number" id="speed_limit_offset" min="0" onchange="updateConfig()">
                </td>
            </tr>

            <tr>
                <td>Dòng chữ khi khởi động </td>
                <td>
                    <input type="text" id="welcome_text" onchange="updateConfig()">
                </td>
            </tr>
        </table>
        * <i>Cảnh báo tốc độ trễ ví dụ tốc độ giới hạn là 50km/h, muốn đi vượt quá 53km/h mới cảnh báo thì nhập 3 </i>
        <p>
           
        </p>
        <table>
            <tr>
                <td>Kết nối đầu đọc obd vgate icar pro 4.0 <br>Chỉ bật khi có đầu đọc</td>
                <td>
                    <select id="obd_scan_duration" onchange="updateConfig()">
                        <option value="0">0 (Tắt)</option>
                        <option value="5">5 (Bật scan 5s)</option>                
                        <option value="10">10 (Bật scan 10s)</option>                
                    </select>
                </td>
            </tr>
          <!--  <tr style="display: none;>
                <td>Tự ngủ sau khi có kết nối (giây) </td>
                <td>
                    <input type="number" id="awake_duration" min="0" onchange="updateConfig()">
                </td>
            </tr>
            <tr style="display: none;>
                <td>Thời gian ngủ (giây) </td>
                <td>
                    <input type="number" id="sleep_duration" min="0" onchange="updateConfig()">
                </td>
            </tr> -->
        </table>    
        
        <p>
            <button onclick="myFunction()">Gửi</button> <strong><span id="sendState" style="color:#24af37;"></span></strong>
        </p>
        <p>
            <input type="text" size="140"  id="configOutput" readonly style="display: none;">
        </p>

        
        
        
    </p>
</div>
</body>

<script>
function _0x11ea(){var _0x1fe346=[';show_number_marker=','Bluetooth\x20is\x20not\x20connected.\x20Cannot\x20write\x20to\x20characteristic.','charCodeAt','uuid','00002a26-0000-1000-8000-00805f9b34fb','from','Chưa\x20kết\x20nối\x20với\x20ProMax\x20nên\x20không\x20thể\x20gửi\x20lệnh.\x20\x0aHãy\x20kết\x20nối\x20với\x20ProMax!','Characteristic\x20discovered:','\x20value\x20=\x20','connectBleButton','Web\x20Bluetooth\x20API\x20supported\x20in\x20this\x20browser.','#242237','Device\x20Disconnected',';show_number_marker=1','target',';beep_limit_change=0',';led_color=','style','night_brightness','1073639fXAgMk','logo_text','innerHTML','undefined','none','map','Chưa\x20kết\x20nối\x20với\x20thiết\x20bị\x20Bluetooth.','Bluetooth\x20is\x20not\x20connected.','speed_limit_offset','block','welcome_text','5319cfmYkP','Device\x20Selected:','then','alert','Đã\x20gửi!\x20Reload\x20sau\x203s','VIETMAP_HUD',';obd_scan_duration=0','bluetooth',';show_clock=','Trình\x20duyệt\x20này\x20(thiết\x20bị\x20này)\x20không\x20hỗ\x20trợ!<br>\x20','split',';show_logo_at_startup=0','2409332EZspTp','configOutput','33NJkoHt','led_color','2103000oSzkss',';led_brightness=','5pNgrxz','connected','show_logo_at_startup','784LykeCt','writeValueWithoutResponse','getCharacteristic','readValue','value','show_text_kmh','0000180a-0000-1000-8000-00805f9b34fb','Hoặc\x20bằng\x20điện\x20thoại\x20Android.\x20<br>','catch','Found\x20the\x20characteristic:\x20','218150EIxkMj','105554VyjjHs','brightness_value','color',';night_brightness=5','LOAD','getElementById',';speed_limit_offset=','293665BPbKhH','Initializing\x20Bluetooth...','characteristicvaluechanged','name','Decoded\x20value:\x20',';show_speed=',';show_logo_at_startup=','log','DTBK;display_rotation=2;show_clock=1;led_color=0xff0000;led_brightness=9;logo_text=MAPVIET;speed_limit_offset=0;welcome_text=;show_text_kmh=1','getPrimaryService','startNotifications','Connected\x20to\x20GATT\x20Server','display_rotation',';show_text_kmh=','led_brightness','Error:\x20','error','Đã\x20kết\x20nối\x20với\x20ProMax\x20','disconnectBleButton','Current\x20config\x20value:\x20','disconnect','Không\x20kết\x20nối','decode','0000fff1-0000-1000-8000-00805f9b34fb','Try\x20to\x20get\x20characteristic','gatt','requestDevice','device','#d13a30','0000fff2-0000-1000-8000-00805f9b34fb',';welcome_text=','display','click','show_clock','#24af37','0000fff0-0000-1000-8000-00805f9b34fb',';beep_limit_change=','Web\x20Bluetooth\x20API\x20is\x20not\x20available\x20in\x20this\x20browser!','addEventListener','DTBK;display_rotation=','Error\x20writing\x20to\x20the\x20characteristic:\x20',';obd_scan_duration=','44txhPSZ'];_0x11ea=function(){return _0x1fe346;};return _0x11ea();}var _0x2ac534=_0x550a;(function(_0x2ba128,_0x173e73){var _0x2ffc27=_0x550a,_0x3f52cf=_0x2ba128();while(!![]){try{var _0x125d04=parseInt(_0x2ffc27(0x20c))/0x1+parseInt(_0x2ffc27(0x205))/0x2*(parseInt(_0x2ffc27(0x1f3))/0x3)+parseInt(_0x2ffc27(0x1f1))/0x4*(-parseInt(_0x2ffc27(0x1f7))/0x5)+parseInt(_0x2ffc27(0x1f5))/0x6+-parseInt(_0x2ffc27(0x1da))/0x7+parseInt(_0x2ffc27(0x1fa))/0x8*(-parseInt(_0x2ffc27(0x1e5))/0x9)+parseInt(_0x2ffc27(0x204))/0xa*(-parseInt(_0x2ffc27(0x1c6))/0xb);if(_0x125d04===_0x173e73)break;else _0x3f52cf['push'](_0x3f52cf['shift']());}catch(_0x1d542f){_0x3f52cf['push'](_0x3f52cf['shift']());}}}(_0x11ea,0x4f0f0));const connectButton=document['getElementById'](_0x2ac534(0x1d0)),disconnectButton=document[_0x2ac534(0x20a)](_0x2ac534(0x1ae)),bleStateContainer=document[_0x2ac534(0x20a)]('bleState'),brightnessSlider=document[_0x2ac534(0x20a)]('led_brightness'),brightnessValue=document['getElementById'](_0x2ac534(0x206)),configBlock=document[_0x2ac534(0x20a)]('configBlock'),configOutput=document['getElementById'](_0x2ac534(0x1f2));var deviceName=_0x2ac534(0x1ea),bleService=_0x2ac534(0x1bf),configCharacteristic=_0x2ac534(0x1b9),sensorCharacteristic=_0x2ac534(0x1b3),deviceInfoService=_0x2ac534(0x200),firmwareRevisionCharacteristic=_0x2ac534(0x1cb),bleServer,defaultConfig=_0x2ac534(0x214)+_0x2ac534(0x1eb)+_0x2ac534(0x208)+';show_speed=1'+_0x2ac534(0x1d4)+_0x2ac534(0x1d6)+_0x2ac534(0x1f0);connectButton[_0x2ac534(0x1c2)](_0x2ac534(0x1bc),_0x3cd1c4=>{isWebBluetoothEnabled()&&connectToDevice();}),disconnectButton[_0x2ac534(0x1c2)](_0x2ac534(0x1bc),disconnectDevice);function _0x550a(_0x5e4c48,_0x3a266d){var _0x11ea92=_0x11ea();return _0x550a=function(_0x550ab2,_0x3185c2){_0x550ab2=_0x550ab2-0x1ab;var _0x93965e=_0x11ea92[_0x550ab2];return _0x93965e;},_0x550a(_0x5e4c48,_0x3a266d);}function isWebBluetoothEnabled(){var _0x574b6c=_0x2ac534;if(!navigator['bluetooth'])return console[_0x574b6c(0x213)](_0x574b6c(0x1c1)),bleStateContainer[_0x574b6c(0x1dc)]=_0x574b6c(0x1ee)+'Thử\x20mở\x20trang\x20này\x20bằng\x20máy\x20tính\x20và\x20trình\x20duyệt\x20Chrome).<br>'+_0x574b6c(0x201)+'Hoặc\x20bằng\x20ứng\x20dụng\x20<a\x20href=\x22https://apps.apple.com/us/app/bluefy-web-ble-browser/id1492822055\x22>Bluefy</a>\x20trên\x20iPhone.',![];return console[_0x574b6c(0x213)](_0x574b6c(0x1d1)),!![];}function connectToDevice(){var _0x4bf245=_0x2ac534;console[_0x4bf245(0x213)](_0x4bf245(0x20d)),navigator[_0x4bf245(0x1ec)][_0x4bf245(0x1b6)]({'filters':[{'name':deviceName}],'optionalServices':[bleService,deviceInfoService]})[_0x4bf245(0x1e7)](_0x4dacc9=>{var _0x187d83=_0x4bf245;return console[_0x187d83(0x213)](_0x187d83(0x1e6),_0x4dacc9[_0x187d83(0x20f)]),bleStateContainer[_0x187d83(0x1dc)]='Đang\x20kết\x20nối\x20với\x20ProMax\x20',bleStateContainer['style']['color']=_0x187d83(0x1d2),_0x4dacc9[_0x187d83(0x1c2)]('gattservicedisconnected',onDisconnected),_0x4dacc9[_0x187d83(0x1b5)]['connect']();})[_0x4bf245(0x1e7)](_0xc189e5=>{var _0x1e19b7=_0x4bf245;return bleServer=_0xc189e5,console['log'](_0x1e19b7(0x217)),bleServer[_0x1e19b7(0x215)](deviceInfoService);})[_0x4bf245(0x1e7)](_0x2cff85=>{var _0x484111=_0x4bf245;return console['log'](_0x484111(0x1b4)),_0x2cff85['getCharacteristic'](firmwareRevisionCharacteristic);})['then'](_0x20f757=>{var _0x29a552=_0x4bf245;return console['log']('Try\x20to\x20read\x20revision\x20value'),_0x20f757[_0x29a552(0x1fd)]();})[_0x4bf245(0x1e7)](_0x2c08a4=>{var _0x8eed7c=_0x4bf245;console[_0x8eed7c(0x213)]('Read\x20value:\x20',_0x2c08a4);const _0xcb3967=new TextDecoder()[_0x8eed7c(0x1b2)](_0x2c08a4);bleStateContainer['style'][_0x8eed7c(0x207)]=_0x8eed7c(0x1be),bleStateContainer['innerHTML']=_0x8eed7c(0x1ad)+_0xcb3967,configBlock[_0x8eed7c(0x1d8)][_0x8eed7c(0x1bb)]=_0x8eed7c(0x1e3),console[_0x8eed7c(0x213)](_0x8eed7c(0x210),_0xcb3967),parseData(),loadCurrentConfig();})[_0x4bf245(0x202)](_0x64e0d6=>{var _0x16da12=_0x4bf245;console[_0x16da12(0x213)](_0x16da12(0x1ab),_0x64e0d6);});}function onDisconnected(_0x43bcdc){var _0x4fb82a=_0x2ac534;console[_0x4fb82a(0x213)]('Device\x20Disconnected:',_0x43bcdc['target'][_0x4fb82a(0x1b7)][_0x4fb82a(0x20f)]),bleStateContainer[_0x4fb82a(0x1dc)]=_0x4fb82a(0x1b1),bleStateContainer[_0x4fb82a(0x1d8)][_0x4fb82a(0x207)]=_0x4fb82a(0x1b8),connectToDevice();}function loadCurrentConfig(){var _0x85d631=_0x2ac534;bleServer&&bleServer[_0x85d631(0x1f8)]?(bleServer[_0x85d631(0x215)](bleService)[_0x85d631(0x1e7)](_0xd92358=>{var _0x434b17=_0x85d631;return _0xd92358[_0x434b17(0x1fc)](sensorCharacteristic);})[_0x85d631(0x1e7)](_0x463622=>{var _0x406175=_0x85d631;console[_0x406175(0x213)](_0x406175(0x1ce),_0x463622['uuid']),_0x463622[_0x406175(0x1c2)](_0x406175(0x20e),handleCharacteristicChange),_0x463622[_0x406175(0x216)]();})[_0x85d631(0x202)](_0x2146d2=>{var _0x5edd2c=_0x85d631;console[_0x5edd2c(0x1ac)](_0x5edd2c(0x1ab),_0x2146d2);}),bleServer[_0x85d631(0x215)](bleService)[_0x85d631(0x1e7)](_0x25c996=>{return _0x25c996['getCharacteristic'](configCharacteristic);})[_0x85d631(0x1e7)](_0xd16d18=>{var _0x359ede=_0x85d631;console[_0x359ede(0x213)]('Found\x20the\x20characteristic:\x20',_0xd16d18[_0x359ede(0x1ca)]);var _0x179453=_0x359ede(0x209);const _0x32c36e=Uint8Array['from'](_0x179453['split']('')['map'](_0x1f00d8=>_0x1f00d8['charCodeAt']()));return _0xd16d18[_0x359ede(0x1fb)](_0x32c36e);})[_0x85d631(0x202)](_0x389b2e=>{var _0x759f98=_0x85d631;console[_0x759f98(0x1ac)](_0x759f98(0x1c4),_0x389b2e);})):console[_0x85d631(0x1ac)](_0x85d631(0x1c8));}function handleCharacteristicChange(_0x88626c){var _0x448660=_0x2ac534;const _0x1732a3=new TextDecoder()['decode'](_0x88626c[_0x448660(0x1d5)][_0x448660(0x1fe)]);console['log'](_0x448660(0x1af),_0x1732a3),_0x1732a3!=''&&(defaultConfig=_0x1732a3,parseData());}function myFunction(){var _0x594987=_0x2ac534;bleServer&&bleServer[_0x594987(0x1f8)]?bleServer[_0x594987(0x215)](bleService)[_0x594987(0x1e7)](_0x49ef17=>{var _0x2b1b03=_0x594987;return _0x49ef17[_0x2b1b03(0x1fc)](configCharacteristic);})['then'](_0x1153be=>{var _0x1aa9b1=_0x594987;console['log'](_0x1aa9b1(0x203),_0x1153be['uuid']);var _0xb7d7ff=document[_0x1aa9b1(0x20a)](_0x1aa9b1(0x1f2))[_0x1aa9b1(0x1fe)];const _0x1c6bde=Uint8Array[_0x1aa9b1(0x1cc)](_0xb7d7ff[_0x1aa9b1(0x1ef)]('')[_0x1aa9b1(0x1df)](_0x8519b0=>_0x8519b0[_0x1aa9b1(0x1c9)]()));return _0x1153be['writeValueWithoutResponse'](_0x1c6bde);})[_0x594987(0x1e7)](_0x3e65f1=>{var _0x47bb1a=_0x594987;sendState[_0x47bb1a(0x1dc)]=_0x47bb1a(0x1e9),setTimeout(()=>window['location']['reload'](),0xbb8);})[_0x594987(0x202)](_0xa9add3=>{var _0x23090c=_0x594987;console['error'](_0x23090c(0x1c4),_0xa9add3);}):(console['error'](_0x594987(0x1c8)),window[_0x594987(0x1e8)](_0x594987(0x1cd)));}function disconnectDevice(){var _0x48f11c=_0x2ac534;console[_0x48f11c(0x213)]('Disconnect\x20Device.'),bleServer&&bleServer[_0x48f11c(0x1f8)]?(bleServer[_0x48f11c(0x1b0)](),console[_0x48f11c(0x213)](_0x48f11c(0x1d3)),bleStateContainer[_0x48f11c(0x1dc)]='Không\x20kết\x20nối',bleStateContainer[_0x48f11c(0x1d8)]['color']='#d13a30',configBlock['style'][_0x48f11c(0x1bb)]=_0x48f11c(0x1de)):(console[_0x48f11c(0x1ac)](_0x48f11c(0x1e1)),window[_0x48f11c(0x1e8)](_0x48f11c(0x1e0)));}function updateConfig(){var _0x75d4a0=_0x2ac534,_0x587fcd=document['getElementById'](_0x75d4a0(0x1f4))[_0x75d4a0(0x1fe)]['replace']('#','0x'),_0x419307=_0x75d4a0(0x1c3)+document[_0x75d4a0(0x20a)](_0x75d4a0(0x218))['value']+_0x75d4a0(0x1ed)+document[_0x75d4a0(0x20a)](_0x75d4a0(0x1bd))['value']+_0x75d4a0(0x1d7)+_0x587fcd+_0x75d4a0(0x1f6)+document[_0x75d4a0(0x20a)](_0x75d4a0(0x21a))[_0x75d4a0(0x1fe)]+';logo_text='+document[_0x75d4a0(0x20a)](_0x75d4a0(0x1db))['value']+_0x75d4a0(0x20b)+document[_0x75d4a0(0x20a)](_0x75d4a0(0x1e2))[_0x75d4a0(0x1fe)]+';night_brightness='+document['getElementById'](_0x75d4a0(0x1d9))[_0x75d4a0(0x1fe)]+_0x75d4a0(0x1ba)+document[_0x75d4a0(0x20a)](_0x75d4a0(0x1e4))[_0x75d4a0(0x1fe)]+_0x75d4a0(0x219)+document[_0x75d4a0(0x20a)](_0x75d4a0(0x1ff))['value']+_0x75d4a0(0x211)+document['getElementById']('show_speed')['value']+_0x75d4a0(0x1c5)+document[_0x75d4a0(0x20a)]('obd_scan_duration')['value']+_0x75d4a0(0x1c7)+document['getElementById']('show_number_marker')[_0x75d4a0(0x1fe)]+_0x75d4a0(0x1c0)+document[_0x75d4a0(0x20a)]('beep_limit_change')['value']+_0x75d4a0(0x212)+document['getElementById'](_0x75d4a0(0x1f9))['value'];configOutput[_0x75d4a0(0x1fe)]=_0x419307;}function parseData(){var _0x56c59c=_0x2ac534;configOutput['value']=defaultConfig;var _0x5e2724=configOutput[_0x56c59c(0x1fe)];_0x5e2724['split'](';')['forEach'](function(_0x391b46){var _0xb8e481=_0x56c59c,_0x19bf9f=_0x391b46[_0xb8e481(0x1ef)]('=');console[_0xb8e481(0x213)]('key\x20=\x20'+_0x19bf9f[0x0]+_0xb8e481(0x1cf)+_0x19bf9f[0x1]);var _0x234a48=document[_0xb8e481(0x20a)](_0x19bf9f[0x0]);typeof _0x234a48!=_0xb8e481(0x1dd)&&_0x234a48!=null&&(_0x19bf9f[0x0]=='led_color'?_0x234a48[_0xb8e481(0x1fe)]=_0x19bf9f[0x1]['replace']('0x','#'):_0x234a48[_0xb8e481(0x1fe)]=_0x19bf9f[0x1]);});}

</script>

</html>
